<div class="row justify-content-center align-items-center page-animation">
  <div class="col-lg-11" id="job-list">
    <button
      class="btn btn-primary"
      id="togglefilter"
      data-toggle="collapse"
      aria-expanded="false"
      href="#filterView"
    >
      Filter<i class="fa fa-filter hover-none ml-2" aria-hidden="true"></i>
    </button>
    <div class="row mx-0 my-3 collapse" id="filterView">
      <div class="col-4 chiller_cb">
        <ng-select
          class="custom search-dropdown"
          id="job-make-applications"
          placeholder="Make"
          name="Make"
          resolution="duplicate"
          [(ngModel)]="filter.MakeID"
          #MakeName="ngModel"
          (change)="filter.ModelID = null"
        >
          <ng-option
            *ngFor="let item of _sharedService._commonMeta.Makes"
            [value]="item.MakeID"
            >{{ item.EnglishMakeName }}</ng-option
          >
        </ng-select>
      </div>
      <div class="col-4 chiller_cb">
        <ng-select
          class="custom search-dropdown"
          id="job-model-applications"
          placeholder="Model"
          name="model"
          resolution="duplicate"
          [(ngModel)]="filter.ModelID"
          #ModelName="ngModel"
        >
          <ng-option
            *ngFor="
              let item of _sharedService._commonMeta.Models
                | filter: filter.MakeID:'MakeID'
            "
            [value]="item.ModelID"
            >{{ item.EnglishModelName }}</ng-option
          >
        </ng-select>
      </div>
      <div class="col-4 chiller_cb">
        <ng-select
          class="custom search-dropdown"
          id="job-year-applications"
          placeholder="Year"
          name="year"
          resolution="duplicate"
          [(ngModel)]="filter.ProductionYear"
          #YearName="ngModel"
        >
          <ng-option
            *ngFor="let item of _sharedService._commonMeta.Years"
            [value]="item.YearCode"
            >{{ item.YearCode }}</ng-option
          >
        </ng-select>
      </div>
      <div class="col-sm-6 pt-2 mt-3">
        <div class="form-group">
          <input
            type="text"
            class="floating-input form-control input-label"
            placeholder="Job Number, Customer Name or Plate Number"
            name="first_name"
            [(ngModel)]="filter.SearchQuery"
            #search="ngModel"
            (keypress)="onKeypressEvent($event)"
          />
        </div>
      </div>
      <div class="col-sm-4 mt-3">
        <button
          type="button"
          id="getJobListBtn"
          class="btn btn-primary"
          (click)="
            filter.pageNumber = 1;
            filter.queuePageNumber = 1;
            getAllJobCards((_sharedService.jobCardTab = 19))
          "
        >
          Apply
        </button>
        <u class="mx-4 primary-color mt-3 font-16 cursor" (click)="clear()"
          >Clear</u
        >
      </div>
    </div>
    <!--  filters -->
    <div class="row justify-content-center mt-3 mx-3">
      <!-- <div class="floating-label form-group col-sm-3">
                <input type="text" value="" placeholder=" " class="floating-input form-control" name="CustomerName"
                    [(ngModel)]="filter.CustomerName" #CustomerName="ngModel"
                    (keyup.enter)="filter.CustomerName!= undefined && filter.CustomerName != '' ? getAllJobCards() : ''"
                    onkeypress="return (event.charCode == 8 || event.charCode == 0) ? null : (event.charCode >= 65 && event.charCode <= 90) || (event.charCode >= 97 && event.charCode <= 122) " />
                <span class="highlight"></span>
                <label class="input-label">Customer Name</label>
            </div>
            <div class="floating-label form-group col-sm-3">
                <input type="text" PhoneMask value="" placeholder=" " class="floating-input form-control"
                    name="CustomerMobile" [(ngModel)]="filter.CustomerMobile" #CustomerMobile="ngModel"
                    (keyup.enter)="filter.CustomerMobile!= undefined && filter.CustomerMobile != '' ? getAllJobCards() : ''"
                    onkeypress="return (event.charCode == 8 || event.charCode == 0) ? null :event.charCode > 47 && event.charCode <= 57" />
                <span class="highlight"></span>
                <label class="input-label">Customer Phone</label>
            </div>
            <div class="floating-label form-group col-sm-3">
                <input type="text" value="" placeholder=" " class="floating-input form-control" name="PlateNumber"
                    [(ngModel)]="filter.PlateNumber" #PlateNumber="ngModel"
                    (keyup.enter)="filter.PlateNumber!= undefined && filter.PlateNumber != '' ? getAllJobCards() : ''"
                    onkeypress="return (event.charCode == 8 || event.charCode == 0) ? null : (event.charCode >= 65 && event.charCode <= 90) || (event.charCode >= 97 && event.charCode <= 122) || (event.charCode ==32) ||  event.charCode > 46 && event.charCode != 47 && event.charCode <= 57 || event.charCode == 45" />
                <span class="highlight"></span>
                <label class="input-label">Plate Number</label>
            </div> -->
      <!-- <div class="col-sm-1 text-center px-0">
                <button type="button" class="btn btn-primary btn-round h-40 py-1 mt-2" (click)="clearFilters()"
                    title="Clear">Clear</button>
            </div> -->
    </div>

    <!-- tabset -->
    <div
      class="pn-ProductNav_Wrapper mb-3"
      *ngIf="
        _sharedService._commonMeta.ObjectStatus != undefined &&
        (
          _sharedService._commonMeta.ObjectStatus
          | filter: 'Tabset':'ObjectNameEnglish'
        ).length >= 0
      "
    >
      <nav class="bg-white nav-tabset scrollmenu">
        <div class="jl-main-tabset">
          <div
            class="justify-content-center"
            *ngIf="
              _sharedService.logged_user_role_id == 1 ||
              _sharedService.logged_user_role_id == 2 ||
              _sharedService.logged_user_role_id == 3 ||
              _sharedService.logged_user_role_id == 4
            "
          >
            <input
              class="radio-btn"
              type="radio"
              (click)="_sharedService.jobCardTab = 5"
              id="queue"
              name="jcStatus"
              [checked]="_sharedService.jobCardTab == 5"
              (change)="radioTab = true"
            />
            <label for="queue" class="radio-tabset py-2 queuem"
              >&nbsp;Queue
              <sup class="sup" *ngIf="AppointmentCount != undefined">{{
                AppointmentCount
              }}</sup>
            </label>
          </div>
          <ng-container
            *ngFor="
              let jp of _sharedService._commonMeta.ObjectStatus
                | filter: 'Tabset':'ObjectNameEnglish';
              let idx = index
            "
          >
            <a>
              <input
                class="radio-btn"
                type="radio"
                (click)="
                  _sharedService.jobCardTab = jp.ObjectStatusID;
                  filter.pageNumber = 1;
                  _sharedService.jobCardPage = 1;
                  getAllJobCards(jp.ObjectStatusID)
                "
                id="{{ jp.StatusNameEnglish }}"
                name="jobProcess"
                [checked]="jp.ObjectStatusID === _sharedService.jobCardTab"
                (change)="radioTab = true"
                value="0"
              />
              <label
                for="{{ jp.StatusNameEnglish }}"
                class="radio-tabset py-2 text-center"
              >
                <span class="temp"
                  ><i class="ts icon-size {{ jp.Icon }} mr-2"></i
                ></span>
                <span class="light-bold">{{ jp.StatusNameEnglish }} </span>
                <sup
                  class="sup font-9"
                  *ngIf="
                    _sharedService.jobObj.JCBasicInfo.NewCount != undefined &&
                    jp.StatusNameEnglish == 'New'
                  "
                >
                  {{ _sharedService.jobObj.JCBasicInfo.NewCount }}</sup
                >
                <sup
                  class="sup font-9"
                  *ngIf="
                    _sharedService.jobObj.JCBasicInfo.InspectionCount !=
                      undefined &&
                    jp.StatusNameEnglish == 'Inspection & Approval'
                  "
                >
                  {{ _sharedService.jobObj.JCBasicInfo.InspectionCount }}</sup
                >
                <sup
                  class="sup font-9"
                  *ngIf="
                    _sharedService.jobObj.JCBasicInfo.WorkCount != undefined &&
                    jp.StatusNameEnglish == 'Work In Progress'
                  "
                >
                  {{ _sharedService.jobObj.JCBasicInfo.WorkCount }}</sup
                >
                <sup
                  class="sup font-9"
                  *ngIf="
                    _sharedService.jobObj.JCBasicInfo.CompletedCount !=
                      undefined && jp.StatusNameEnglish == 'Completed'
                  "
                >
                  {{ _sharedService.jobObj.JCBasicInfo.CompletedCount }}</sup
                >
              </label>
            </a>
          </ng-container>
        </div>
      </nav>
    </div>

    <!-- job list cards -->
    <div class="pt-3" *ngIf="_sharedService.jobCardTab != 5">
      <div
        *ngIf="
          _sharedService.jobObj == undefined ||
          (_sharedService.jobObj != undefined &&
            _sharedService.jobObj.JCBasicInfoList == undefined) ||
          (_sharedService.jobObj != undefined &&
            _sharedService.jobObj.JCBasicInfoList != undefined &&
            (
              _sharedService.jobObj.JCBasicInfoList
              | filter: _sharedService.jobCardTab:'CurrentJobStatus'
            ).length == 0)
        "
      >
        <h5 class="no-record-error">No data found</h5>
      </div>
      <ng-container *ngIf="_sharedService.jobCardTab == 19">
        <ng-container
          *ngFor="
            let jc of _sharedService.jobObj.JCBasicInfoList
              | filter: 19:'CurrentJobStatus'
              | searchJobCard: searchQuery
              | slice
                : (cPage - 1) * _sharedService.pageSize
                : (cPage - 1) * _sharedService.pageSize +
                    _sharedService.pageSize;
            let i = index
          "
        >
          <div class="card inner-card-shadow mb-0">
            <!-- card-header -->
            <div
              class="card-header list-card-header light-bold mb-2 bg-white bb-0"
            >
              <div class="d-flex justify-content-between">
                <span class="card-number">{{ jc.JobCardNumber }} </span>
                <span class="serial-number">{{ jc.SeriesID }} </span>
                <span
                  *ngIf="jc.IsContractVehicles == true"
                  class="contract-number"
                  >Service Contract Customer</span
                >
              </div>
              <div class="row pt-1 mx-0">
                <div class="col-12 pt-2 px-1">
                  <div class="row justify-content-end mx-0 primary-dark-font">
                    <span
                      class="col-6 text-right"
                      *ngIf="
                        (_sharedService.logged_user_role_id == 1 ||
                          _sharedService.logged_user_role_id == 2) &&
                        jc.IsTaxFree == true
                      "
                    >
                      <label class="primary-dark-font">Tax Free Card</label>
                      <i
                        class="px-2 fas fa-image pointer"
                        title="View Document"
                        (click)="openFile(jc.JobCardID)"
                      ></i>

                      <ng-container
                        *ngIf="
                          (_sharedService.logged_user_role_id == 1 ||
                            _sharedService.logged_user_role_id == 2) &&
                          jc.IsTaxFreeApproved == false
                        "
                      >
                        <button
                          class="
                            a-button
                            btn btn-primary btn-round btn-simple
                            font-8
                            px-1
                            py-1
                            my-0
                          "
                          title="Approve"
                          (click)="setTaxFree(true, jc.JobCardID)"
                        >
                          Approve
                        </button>

                        <button
                          class="
                            a-button
                            btn btn-primary btn-round btn-simple
                            font-8
                            px-1
                            py-1
                            my-0
                          "
                          title="Reject"
                          (click)="setNotTaxFree(false, jc.JobCardID)"
                        >
                          Reject
                        </button>
                      </ng-container>
                    </span>

                    <span class="col-6 text-right">
                      <i
                        *ngIf="
                          _sharedService.logged_user_role_id == 1 ||
                          _sharedService.logged_user_role_id == 2 ||
                          _sharedService.logged_user_role_id == 3 ||
                          _sharedService.logged_user_role_id == 4 ||
                          _sharedService.logged_user_role_id == 5 ||
                          (_sharedService.user?.Roles
                            | editAcceptedJob
                              : _sharedService.logged_user_id
                              : _sharedService.jobObj.JobProcess
                              : jc.JobCardID)
                        "
                        class="px-2 fas fa-eye pointer"
                        title="View"
                        [routerLink]="['/', 'job', 'detail']"
                        [queryParams]="{ JobCardID: jc.JobCardID }"
                      ></i>

                      <i
                        *ngIf="
                          _sharedService.logged_user_role_id == 1 ||
                          _sharedService.logged_user_role_id == 2 ||
                          _sharedService.logged_user_role_id == 3 ||
                          _sharedService.logged_user_role_id == 4 ||
                          _sharedService.logged_user_role_id == 5 ||
                          (_sharedService.user?.Roles
                            | editAcceptedJob
                              : _sharedService.logged_user_id
                              : _sharedService.jobObj.JobProcess
                              : jc.JobCardID)
                        "
                        class="px-2 fas fa-search"
                        title="View"
                        [routerLink]="['/', 'part', 'compare-parts']"
                        [queryParams]="{ JobCardID: jc.JobCardID }"
                      ></i>

                      <i
                        *ngIf="
                          _sharedService.logged_user_role_id == 1 ||
                          _sharedService.logged_user_role_id == 2 ||
                          _sharedService.logged_user_role_id == 3 ||
                          _sharedService.logged_user_role_id == 4 ||
                          _sharedService.logged_user_role_id == 5 ||
                          (_sharedService.user?.Roles
                            | editAcceptedJob
                              : _sharedService.logged_user_id
                              : _sharedService.jobObj.JobProcess
                              : jc.JobCardID)
                        "
                        class="px-2 fas fa-edit pointer"
                        title="Edit"
                        [routerLink]="
                          _sharedService.logged_user_role_id == 5 ||
                          _sharedService.logged_user_role_id == 6 ||
                          _sharedService.logged_user_role_id == 8
                            ? [
                                '/',
                                'update-job',
                                jc.JobCardID,
                                'inspection-results'
                              ]
                            : _sharedService.logged_user_role_id == 4
                            ? [
                                '/',
                                'update-job',
                                jc.JobCardID,
                                'basic-info-view'
                              ]
                            : ['/', 'update-job', jc.JobCardID, 'basic-info']
                        "
                      ></i>

                      <i
                        *ngIf="
                          _sharedService.logged_user_role_id == 1 ||
                          _sharedService.logged_user_role_id == 2 ||
                          _sharedService.logged_user_role_id == 3
                        "
                        class="px-2 fas fa-comment-alt pointer"
                        title="Feedback"
                        [routerLink]="['/', 'customer', 'customer-feedback']"
                        [queryParams]="{
                          JobCardID: jc.JobCardID,
                          CustomerID: jc.CustomerID
                        }"
                      ></i>

                      <i
                        *ngIf="
                          _sharedService.logged_user_role_id == 1 ||
                          _sharedService.logged_user_role_id == 2
                        "
                        class="px-2 fas fa-trash-alt pointer pointer"
                        title="Delete"
                        (click)="openModal(warningDelete, jc.JobCardID)"
                      ></i>
                    </span>

                    <!-- <i *ngIf="_sharedService.logged_user_role_id == 5 || _sharedService.logged_user_role_id == 8"
                                        class="fas fa-car pointer m-2 pointer" title="Vehicle Profile"
                                        [routerLink]="['/','vehicle','view']"
                                        [queryParams]="{VehicleID : jc.VehicleID}"></i> -->
                  </div>
                </div>

                <div
                  class="row col-12 primary-dark-font pt-1 pl-lg-4 mx-0 ipad"
                >
                  <div class="col-3 row mx-0">
                    <div class="col-12 bold-font">
                      <i class="fas fa-user mr-2 primary-font" title="Name"></i>
                      <label>{{ jc.CustomerFullName }} </label>
                    </div>

                    <div class="col-12 bold-font">
                      <i
                        class="fas fa-mobile-alt mr-2 primary-font"
                        title="Phone"
                      ></i>
                      <label>{{ jc.ContactPersonMobile }}</label>
                    </div>
                  </div>

                  <div class="col-3 row mx-0">
                    <div
                      class="col-12 align-self-center pointer bold-font px-0"
                      title="Make Model Year"
                    >
                      <a
                        class="primary-dark-font"
                        [routerLink]="['/', 'vehicle', 'view']"
                        [queryParams]="{ VehicleID: jc.VehicleID }"
                      >
                        <i
                          class="fas fa-car mr-2 fa-lg primary-font"
                          title="Make Model Year"
                        ></i>
                        <span class="pointer"
                          >{{ jc.EnglishMakeName }}
                          {{ jc.EnglishModelName }}
                          {{ jc.ProductionYear }}</span
                        >
                      </a>
                    </div>

                    <div class="col-12 align-self-center bold-font px-0">
                      <i
                        class="ts plate-number-icon mr-2"
                        title="Plate Number"
                      ></i>
                      <label>{{ jc.PlateNumber }}</label>
                    </div>
                  </div>

                  <div class="col-3 row mx-0">
                    <div class="col-12" title="Check-in time">
                      <i class="fas fa-angle-right mr-1 primary-font"></i
                      ><i class="fas fa-clock mr-1 primary-font"></i>
                      <label>{{ jc.JobOpenDate | date: "short" }}</label>
                    </div>
                    <div class="col-12" title="Checkout time">
                      <i class="fas fa-angle-left mr-1 primary-font"></i
                      ><i class="fas fa-clock mr-1 primary-font"></i>
                      <label>{{ jc.JobCloseDate | date: "short" }}</label>
                    </div>
                  </div>
                  <!-- foreman supervisor -->
                  <div class="col-3 row mx-0">
                    <div class="col-12">
                      <i class="ts foreman-icon mr-2" title="Foreman"></i>
                      <label *ngIf="jc.ForemanName != undefined">{{
                        jc.ForemanName
                      }}</label>
                      <span
                        *ngIf="
                          jc.ForemanName == undefined || jc.ForemanName == ''
                        "
                      >
                        <label
                          class="primary-font"
                          *ngIf="
                            _sharedService.logged_user_role_id == 1 ||
                            _sharedService.logged_user_role_id == 2 ||
                            _sharedService.logged_user_role_id == 4
                          "
                          >Assign Foreman</label
                        >
                        <label
                          *ngIf="
                            _sharedService.logged_user_role_id != 1 &&
                            _sharedService.logged_user_role_id != 2 &&
                            _sharedService.logged_user_role_id != 4
                          "
                          >-</label
                        >
                      </span>

                      <i
                        class="fas fa-edit mx-2 primary-font"
                        *ngIf="
                          (_sharedService.logged_user_role_id == 1 ||
                            _sharedService.logged_user_role_id == 2 ||
                            _sharedService.logged_user_role_id == 4) &&
                          jc.StatusID != 25 &&
                          (jc.VIStatusID == 17 ||
                            (
                              _sharedService.jobObj.JobParts
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: true:'IsInclude'
                            ).length > 0 ||
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: true:'IsInclude'
                            ).length > 0)
                        "
                        (click)="
                          openAssignTechnician(assignTechModal, jc.JobCardID, 1)
                        "
                      ></i>
                    </div>

                    <div class="col-12">
                      <i class="ts supervisor-icon mr-2" title="Supervisor"></i>
                      <label *ngIf="jc.SupervisorName != undefined">{{
                        jc.SupervisorName
                      }}</label>
                      <span
                        *ngIf="
                          jc.SupervisorName == undefined ||
                          jc.SupervisorName == ''
                        "
                      >
                        <label
                          class="primary-font"
                          *ngIf="
                            _sharedService.logged_user_role_id == 1 ||
                            _sharedService.logged_user_role_id == 2 ||
                            _sharedService.logged_user_role_id == 3
                          "
                          >Assign Supervisor</label
                        >
                        <label
                          *ngIf="
                            _sharedService.logged_user_role_id != 1 &&
                            _sharedService.logged_user_role_id != 2 &&
                            _sharedService.logged_user_role_id != 3
                          "
                          >-</label
                        >
                      </span>

                      <i
                        class="fas fa-edit mx-2 primary-font"
                        *ngIf="
                          (_sharedService.logged_user_role_id == 1 ||
                            _sharedService.logged_user_role_id == 2 ||
                            _sharedService.logged_user_role_id == 3) &&
                          jc.StatusID != 25 &&
                          (jc.VIStatusID == 17 ||
                            (
                              _sharedService.jobObj.JobParts
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: true:'IsInclude'
                            ).length > 0 ||
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: true:'IsInclude'
                            ).length > 0)
                        "
                        (click)="
                          openAssignTechnician(assignTechModal, jc.JobCardID, 2)
                        "
                      ></i>
                    </div>
                  </div>

                  <!-- assign technicians dropdown -->
                  <div
                    class="col-12 row"
                    *ngIf="
                      _sharedService.logged_user_role_id != 3 &&
                      jc.ApprovalStatusID == 17 &&
                      jc.QAStatusID != 17
                    "
                  >
                    <div
                      class="
                        floating-label
                        form-group
                        col-lg-3 col-sm-4
                        mb-0
                        pb-0
                        pt-2
                        text-center
                      "
                    >
                      <span
                        >{{
                          jc.MechanicID == undefined
                            ? "Choose Mechanic"
                            : (_sharedService.jobObj.Employees
                                | filter: jc.MechanicID:"UserID")[0]
                                .EmployeeFullName
                        }}
                        <i
                          class="fas fa-edit mx-2 primary-font"
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 70:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length > 0
                          "
                          (click)="
                            openAssignTechnician(
                              assignTechModal,
                              jc.JobCardID,
                              96
                            )
                          "
                        ></i>
                        <small
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 70:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length == 0
                          "
                          >(No task)</small
                        >
                      </span>
                    </div>

                    <div
                      class="
                        floating-label
                        form-group
                        col-lg-3 col-sm-4
                        mb-0
                        pb-0
                        pt-2
                        text-center
                      "
                    >
                      <span
                        >{{
                          jc.ElectricianID == undefined
                            ? "Choose Electrician"
                            : (_sharedService.jobObj.Employees
                                | filter: jc.ElectricianID:"UserID")[0]
                                .EmployeeFullName
                        }}
                        <i
                          class="fas fa-edit mx-2 primary-font"
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 71:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length > 0
                          "
                          (click)="
                            openAssignTechnician(
                              assignTechModal,
                              jc.JobCardID,
                              95
                            )
                          "
                        ></i>
                        <small
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 71:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length == 0
                          "
                          >(No task)</small
                        >
                      </span>
                    </div>

                    <div
                      class="
                        floating-label
                        form-group
                        col-lg-3 col-sm-4
                        mb-0
                        pb-0
                        pt-2
                        text-center
                      "
                    >
                      <span
                        >{{
                          jc.OtherTechID == undefined
                            ? "Choose Other"
                            : (_sharedService.jobObj.Employees
                                | filter: jc.OtherTechID:"UserID")[0]
                                .EmployeeFullName
                        }}
                        <i
                          class="fas fa-edit mx-2 primary-font"
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 102:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length > 0
                          "
                          (click)="
                            openAssignTechnician(
                              assignTechModal,
                              jc.JobCardID,
                              97
                            )
                          "
                        ></i>
                        <small
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 102:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length == 0
                          "
                          >(No task)</small
                        >
                      </span>
                    </div>

                    <div
                      class="
                        floating-label
                        form-group
                        col-lg-3 col-sm-4
                        mb-0
                        pb-0
                        pt-2
                        text-center
                      "
                    >
                      <span
                        >{{
                          jc.InspectionID == undefined
                            ? "Choose Inspection"
                            : (_sharedService.jobObj.Employees
                                | filter: jc.InspectionID:"UserID")[0]
                                .EmployeeFullName
                        }}
                        <i
                          class="fas fa-edit mx-2 primary-font"
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 139:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length > 0
                          "
                          (click)="
                            openAssignTechnician(
                              assignTechModal,
                              jc.JobCardID,
                              139
                            )
                          "
                        ></i>
                        <small
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 139:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length == 0
                          "
                          >(No task)</small
                        >
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row w-100 mx-0 collapse-margin-top">
              <hr class="divider" />
              <a
                class="collapse-tabset btn p-0"
                data-toggle="collapse"
                href="#card{{ jc.JobCardID }}"
                role="button"
                (click)="collapseJC($event, jc.JobCardID)"
                aria-expanded="false"
                aria-controls="jc.JobCardID"
              >
                <i
                  class="fas fa-chevron-down hover-color px-3 pt-3 pb-2"
                  id="{{ jc.JobCardID }}"
                ></i>
              </a>
            </div>
            <div class="collapse" id="card{{ jc.JobCardID }}">
              <div class="row card-body-font my-0 bb-1 mx-3">
                <div class="col-lg-12 col-sm-12 px-2">
                  <ngb-tabset class="jl-tabset">
                    <ngb-tab title="Concerns">
                      <ng-template ngbTabContent>
                        <div class="p-0 card-scroll card-height">
                          <table class="table table-striped primary-dark-font">
                            <thead>
                              <tr>
                                <th scope="col">ID</th>
                                <th scope="col">Complaint</th>
                                <th scope="col">Type</th>
                                <th scope="col">Cost</th>
                                <th scope="col">Status</th>
                              </tr>
                            </thead>

                            <tbody>
                              <tr
                                class="hovered"
                                *ngFor="
                                  let concern of _sharedService.jobObj
                                    .JobConcerns
                                    | filter: jc.JobCardID:'JobCardID';
                                  let idx = index
                                "
                              >
                                <td>{{ idx + 1 }}</td>
                                <td>{{ concern.ConcernDescription }}</td>
                                <td>{{ concern.ConcernTypeName }}</td>
                                <td>{{ concern.TotalCost }}</td>
                                <td>
                                  <span *ngIf="concern.IsApproved == true"
                                    >Approved</span
                                  >
                                  <span *ngIf="concern.IsApproved != true"
                                    >Not Approved</span
                                  >
                                </td>
                              </tr>
                            </tbody>
                            <tbody
                              *ngIf="
                                _sharedService.jobObj.JobConcerns ==
                                  undefined ||
                                (_sharedService.jobObj.JobConcerns !=
                                  undefined &&
                                  (
                                    _sharedService.jobObj.JobConcerns
                                    | filter: jc.JobCardID:'JobCardID'
                                  ).length == 0)
                              "
                            >
                              <tr scope="row">
                                <td colspan="12" class="text-center">
                                  No Concern Added!
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </ng-template>
                    </ngb-tab>

                    <ngb-tab title="Tasks">
                      <ng-template ngbTabContent>
                        <div class="card main-card no-border list-card">
                          <div class="p-0 card-scroll card-height t-responsive">
                            <table
                              class="table table-striped primary-dark-font"
                            >
                              <thead>
                                <tr>
                                  <th class="th1" scope="col">ID</th>
                                  <th class="th1" scope="col">Name</th>
                                  <th class="th1" scope="col">Type</th>
                                  <th class="th1" scope="col">Category</th>
                                  <th class="th1" scope="col">Start Time</th>
                                  <th class="th1" scope="col">End Time</th>
                                  <!-- <th scope="col"
                                                                    *ngIf="_sharedService.logged_user_role_id == 1 || _sharedService.logged_user_role_id == 2 || _sharedService.logged_user_role_id == 3 || _sharedService.logged_user_role_id == 4 || _sharedService.logged_user_role_id == 5">
                                                                    Labor</th> -->
                                  <th class="th1" scope="col">AssignedTo</th>
                                  <th class="th1" scope="col">Status</th>
                                </tr>
                              </thead>
                              <!-- <div class="row">
                                                            
                                                        </div> -->
                              <tbody
                                *ngIf="
                                  _sharedService.jobObj.JobTasks == undefined ||
                                  (_sharedService.jobObj.JobTasks !=
                                    undefined &&
                                    (
                                      _sharedService.jobObj.JobTasks
                                      | filter: jc.JobCardID:'JobCardID'
                                      | filter: 51:'JobTaskTypeID'
                                    ).length == 0)
                                "
                              >
                                <tr scope="row">
                                  <td colspan="12" class="text-center">
                                    No Task Added!
                                  </td>
                                </tr>
                              </tbody>
                              <!-- before approval -->
                              <tbody *ngIf="jc.ApprovalStatusID != 17">
                                <tr
                                  class="hovered"
                                  title="Task"
                                  (click)="
                                    openTaskModal(taskModel, jt.JobTaskID)
                                  "
                                  *ngFor="
                                    let jt of _sharedService.jobObj.JobTasks
                                      | filter: jc.JobCardID:'JobCardID'
                                      | filter: 51:'JobTaskTypeID';
                                    let idx = index
                                  "
                                >
                                  <td class="td1">{{ idx + 1 }}</td>
                                  <td class="td1">
                                    <span
                                      appElseHyphen
                                      [elseHyphen]="jt.LaborDescriptionEng"
                                    ></span>
                                  </td>
                                  <td class="td1">{{ jt.JobTaskTypeName }}</td>
                                  <td class="td1">{{ jt.RepairTypeName }}</td>
                                  <td class="td1">
                                    {{ jt.AcceptedDateTime | date: "short" }}
                                  </td>
                                  <td class="td1">
                                    {{ jt.EndDateTime | date: "short" }}
                                  </td>
                                  <!-- <td
                                                                    *ngIf="_sharedService.logged_user_role_id == 1 || _sharedService.logged_user_role_id == 2 || _sharedService.logged_user_role_id == 3 || _sharedService.logged_user_role_id == 4 || _sharedService.logged_user_role_id == 5">
                                                                    {{jt.LaborPrice}}</td> -->
                                  <td class="td1">
                                    <span
                                      *ngIf="jt.EmployeeFullName != undefined"
                                      >{{ jt.EmployeeFullName }}</span
                                    >
                                    <span
                                      *ngIf="
                                        jt.EmployeeFullName == undefined ||
                                        jt.EmployeeFullName == ''
                                      "
                                      >N/A</span
                                    >
                                  </td>
                                  <td class="td1">
                                    {{
                                      jt.TaskStatusID == 17
                                        ? "Completed"
                                        : jt.TaskStatusID == 16
                                        ? "In Progress"
                                        : "Not Assigned"
                                    }}
                                  </td>
                                </tr>
                              </tbody>
                              <!-- after approval  -->
                              <tbody *ngIf="jc.ApprovalStatusID == 17">
                                <tr
                                  class="hovered"
                                  title="Task"
                                  (click)="
                                    openTaskModal(taskModel, jt.JobTaskID)
                                  "
                                  *ngFor="
                                    let jt of _sharedService.jobObj.JobTasks
                                      | filter: jc.JobCardID:'JobCardID'
                                      | filter: 51:'JobTaskTypeID'
                                      | filter: true:'IsInclude';
                                    let idx = index
                                  "
                                >
                                  <td>{{ idx + 1 }}</td>
                                  <td>
                                    <span
                                      appElseHyphen
                                      [elseHyphen]="jt.LaborDescriptionEng"
                                    ></span>
                                  </td>
                                  <td>{{ jt.JobTaskTypeName }}</td>
                                  <td>{{ jt.RepairTypeName }}</td>
                                  <td>
                                    {{ jt.AcceptedDateTime | date: "short" }}
                                  </td>
                                  <td>{{ jt.EndDateTime | date: "short" }}</td>
                                  <!-- <td
                                                                    *ngIf="_sharedService.logged_user_role_id == 1 || _sharedService.logged_user_role_id == 2 || _sharedService.logged_user_role_id == 3 || _sharedService.logged_user_role_id == 4 || _sharedService.logged_user_role_id == 5">
                                                                    {{jt.LaborPrice}}</td> -->
                                  <td>
                                    <span
                                      *ngIf="jt.EmployeeFullName != undefined"
                                      >{{ jt.EmployeeFullName }}</span
                                    >
                                    <span
                                      *ngIf="
                                        jt.EmployeeFullName == undefined ||
                                        jt.EmployeeFullName == ''
                                      "
                                      >N/A</span
                                    >
                                  </td>
                                  <td>
                                    {{
                                      jt.TaskStatusID == 17
                                        ? "Completed"
                                        : jt.TaskStatusID == 16
                                        ? "In Progress"
                                        : "Not Assigned"
                                    }}
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </ng-template>
                    </ngb-tab>

                    <ngb-tab title="Parts">
                      <ng-template ngbTabContent>
                        <div class="card main-card no-border list-card">
                          <div class="p-0 card-scroll card-height">
                            <table
                              class="table table-striped primary-dark-font"
                            >
                              <thead>
                                <tr>
                                  <th scope="col">ID</th>
                                  <th scope="col">Part</th>
                                  <th scope="col">Concern</th>
                                  <th scope="col">Status</th>
                                  <th
                                    scope="col"
                                    *ngIf="
                                      _sharedService.logged_user_role_id == 1 ||
                                      _sharedService.logged_user_role_id == 2 ||
                                      _sharedService.logged_user_role_id == 3 ||
                                      _sharedService.logged_user_role_id == 6
                                    "
                                  >
                                    Price
                                  </th>
                                </tr>
                              </thead>

                              <tbody
                                *ngIf="
                                  _sharedService.jobObj.JobParts == undefined ||
                                  (_sharedService.jobObj.JobParts !=
                                    undefined &&
                                    (
                                      _sharedService.jobObj.JobParts
                                      | filter: jc.JobCardID:'JobCardID'
                                    ).length == 0)
                                "
                              >
                                <tr scope="row">
                                  <td colspan="12" class="text-center">
                                    No Part Added!
                                  </td>
                                </tr>
                              </tbody>
                              <tbody>
                                <tr
                                  class="hovered"
                                  *ngFor="
                                    let jp of _sharedService.jobObj.JobParts
                                      | filter: jc.JobCardID:'JobCardID'
                                      | filter
                                        : (jc.ApprovalStatusID == 17
                                            ? true
                                            : '')
                                        : 'IsInclude';
                                    let idx = index
                                  "
                                >
                                  <td>{{ idx + 1 }}</td>
                                  <td>{{ jp.PartNameEnglish }}</td>
                                  <td>{{ jp.ConcernDescription }}</td>
                                  <td>
                                    <span
                                      *ngIf="
                                        _sharedService.logged_user_role_id ==
                                          3 ||
                                        _sharedService.logged_user_role_id == 4
                                      "
                                      >{{
                                        jp.IsInclude == true
                                          ? jp.JobPartStatusName
                                          : "Not Approved"
                                      }}</span
                                    >
                                    <!-- for manager -->
                                    <ng-select
                                      placeholder="Select Status"
                                      *ngIf="
                                        _sharedService.logged_user_role_id ==
                                          1 ||
                                        _sharedService.logged_user_role_id == 2
                                      "
                                      class="custom dropdown-scale"
                                      appendTo="#job-list"
                                      name="partDelivery"
                                      (change)="changePartStatus(jp)"
                                      [(ngModel)]="jp.JobPartStatusName"
                                    >
                                      <ng-option
                                        *ngFor="
                                          let item of _sharedService._commonMeta
                                            .ObjectStatus
                                            | filter
                                              : 'PartDelivery'
                                              : 'ObjectNameEnglish'
                                        "
                                        [value]="item.StatusNameEnglish"
                                      >
                                        {{ item.StatusNameEnglish }}
                                      </ng-option>
                                    </ng-select>
                                  </td>
                                  <td
                                    *ngIf="
                                      _sharedService.logged_user_role_id == 1 ||
                                      _sharedService.logged_user_role_id == 2 ||
                                      _sharedService.logged_user_role_id == 3 ||
                                      _sharedService.logged_user_role_id == 6
                                    "
                                  >
                                    {{ jp.SellingPrice }}
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </ng-template>
                    </ngb-tab>

                    <ngb-tab title="External Tasks">
                      <ng-template ngbTabContent>
                        <div class="card main-card no-border list-card">
                          <div class="p-0 card-scroll card-height">
                            <table
                              class="table table-striped primary-dark-font"
                            >
                              <thead>
                                <tr>
                                  <th scope="col">ID</th>
                                  <th scope="col">Task</th>
                                  <th scope="col">Location</th>
                                </tr>
                              </thead>

                              <tbody
                                *ngIf="
                                  _sharedService.jobObj.JobTasks == undefined ||
                                  (_sharedService.jobObj.JobTasks !=
                                    undefined &&
                                    (
                                      _sharedService.jobObj.JobTasks
                                      | filter: jc.JobCardID:'JobCardID'
                                      | filter: 52:'JobTaskTypeID'
                                    ).length == 0)
                                "
                              >
                                <tr scope="row">
                                  <td colspan="12" class="text-center">
                                    No External Task Added!
                                  </td>
                                </tr>
                              </tbody>

                              <tbody>
                                <tr
                                  class="hovered"
                                  (click)="
                                    openTaskModal(taskModel, jt.JobTaskID)
                                  "
                                  *ngFor="
                                    let jt of _sharedService.jobObj.JobTasks
                                      | filter: jc.JobCardID:'JobCardID'
                                      | filter: 52:'JobTaskTypeID';
                                    let idx = index
                                  "
                                >
                                  <td>{{ idx + 1 }}</td>
                                  <td>
                                    <span
                                      appElseHyphen
                                      [elseHyphen]="jt.LaborDescriptionEng"
                                    ></span>
                                  </td>
                                  <td>{{ jt.Location }}</td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </ng-template>
                    </ngb-tab>
                  </ngb-tabset>
                </div>
              </div>
            </div>
            <!-- card footer -->
            <div class="card-footer text-muted crumbs-footer bt-0">
              <div
                id="crumbs"
                class="col-12 justify-content-center primary-font"
              >
                <ul class="align-self-center">
                  <div class="pn-ProductNav_Wrapper">
                    <nav id="pnProductNavOne" class="pn-ProductNav">
                      <div
                        id="pnProductNavContentsOne"
                        class="pn-ProductNav_Contents mb-1"
                      >
                        <!-- let jt of _sharedService.jobObj.JobTasks  | filter : jc.JobCardID : 'JobCardID' | filter: 51 : 'JobTaskTypeID' -->
                        
                        <ng-container
                          *ngFor="
                            let jp of _sharedService.jobObj.JobProcess
                              | filter: jc.JobCardID:'JobCardID';
                            let id = index
                          "
                        >
                          <li
                            class="pn-ProductNav_LinkOne"
                            aria-selected="true"
                            [ngClass]="{
                              'current-process':
                                jp.ProcessTypeID == jc.ActiveProcess,
                              'completed-process': jp.ProcessStatusID == 17
                            }"
                          >
                            <a class="mb-2">
                              <div
                                class="
                                  floating-label
                                  form-group
                                  col-auto
                                  float-left
                                  d-flex
                                  align-items-center
                                  i-floating-label
                                  w-100
                                  justify-content-center
                                  flex-wrap
                                  pb-0
                                  px-lg-3
                                "
                              >
                                <span class="float-left m-0 mx-lg-1">
                                  <!-- job process names -->
                                  <span class="pointer">
                                    <i class="{{ jp.Icon }} mr-2"></i>
                                    <ng-container
                                      *ngIf="
                                        jp.ProcessStatusID != 17 &&
                                        jp.ProcessTypeID != 11
                                      "
                                    >
                                      <i
                                        class="fas fa-edit mr-1"
                                        [ngClass]="
                                          _sharedService.logged_user_role_id ==
                                            4 && jp.ProcessTypeID == 9
                                            ? 'hover-color'
                                            : 'primary-dark-font'
                                        "
                                        (click)="
                                          openAssignModal(
                                            assignProcessModal,
                                            jp
                                          )
                                        "
                                        *ngIf="
                                          _sharedService.logged_user_role_id ==
                                            1 ||
                                          _sharedService.logged_user_role_id ==
                                            2 ||
                                          (_sharedService.logged_user_role_id ==
                                            3 &&
                                            jp.ProcessTypeID == 8) ||
                                          _sharedService.logged_user_role_id ==
                                            4
                                        "
                                      ></i>
                                    </ng-container>
                                    <small
                                      [ngClass]="
                                        _sharedService.logged_user_role_id ==
                                          4 && jp.ProcessTypeID == 9
                                          ? 'hover-color'
                                          : 'primary-dark-font'
                                      "
                                      class="small-font progress-heading"
                                      >{{ jp.TypeNameEnglish }}</small
                                    >

                                    <i
                                      class="
                                        far
                                        fa-check-circle
                                        ml-1
                                        hover-color
                                      "
                                      *ngIf="jp.ProcessStatusID == 17"
                                    ></i>

                                    <span
                                      *ngIf="
                                        jp.ProcessStatusID != 17 &&
                                        jp.ProcessTypeID != 9
                                      "
                                      class="hover-color"
                                    >
                                      <br />
                                      <span *ngIf="jp.ProcessStatusID == 16"
                                        >Accepted</span
                                      >
                                      <span *ngIf="jp.ProcessStatusID == 15"
                                        >Pending</span
                                      >
                                      <span *ngIf="jp.ProcessStatusID == null"
                                        >Un Assigned</span
                                      >
                                    </span>
                                    <!-- <span
                                                                        class="progress-abbr bold-font">{{jp.ProcessAbbrevation}}</span> -->
                                    <!-- <i class="ts check-mark" title="Job Done"></i> -->
                                  </span>
                                  <!-- dropdown  -->
                                  <!-- <div class="pt-2"
                                                                    *ngIf="jp.ShowDropdown == true && jp.ProcessStatusID != 17 && jp.ProcessTypeID != 11">
                                                                    <ng-select class="custom-job-dropdown"
                                                                        *ngIf="_sharedService.logged_user_role_id == 1 || _sharedService.logged_user_role_id == 2 || (_sharedService.logged_user_role_id == 3 && jp.ProcessTypeID == 8) || _sharedService.logged_user_role_id == 4"
                                                                        (change)="assignJP(jp)"
                                                                        name="{{jc.JobCardID}}{{id}}"
                                                                        appendTo="#job-list" id="{{jc.JobCardID}}{{id}}"
                                                                        [(ngModel)]="jp.EmployeeID">
                                                                        <ng-container
                                                                            *ngFor="let emp of _sharedService.jobObj.Employees | employeeFilter: jp.ProcessTypeID : 'RoleID' : _sharedService.jobObj.UserRoles">
                                                                            <ng-option [value]="emp.UserID"
                                                                                (click)="jp.ShowDropdown = true">
                                                                                {{emp.EmployeeFullName}}
                                                                            </ng-option>
                                                                        </ng-container>
                                                                    </ng-select>
                                                                </div> -->

                                  <!-- technician name  -->
                                  <span
                                    *ngIf="jp.EmployeeID != undefined"
                                    class="smaller-font"
                                    ><br />{{ jp.EmployeeFullName }}
                                    <ng-container *ngIf="jp.ProcessTypeID == 9">
                                      <span *ngIf="jc.IsIRCompleted == 1">
                                        <i
                                          title="Completed"
                                          class="fas fa-check"
                                        ></i>
                                      </span>
                                      <span *ngIf="jc.IsIRCompleted != 1">
                                        <i
                                          title="In Progress"
                                          class="fas fa-hourglass-half"
                                        ></i>
                                      </span>
                                    </ng-container>
                                  </span>

                                  <!-- for IR show tech and high authority progress -->
                                  <span *ngIf="jp.ProcessTypeID == 9">
                                    <br />
                                    High Authority
                                    <span *ngIf="jp.ProcessStatusID == 17"
                                      ><i
                                        title="Completed"
                                        class="fas fa-check"
                                      ></i
                                    ></span>
                                    <span *ngIf="jp.ProcessStatusID != 17"
                                      ><i
                                        title="In Progress"
                                        class="fas fa-hourglass-half"
                                      ></i
                                    ></span>
                                  </span>

                                  <span
                                    *ngIf="jp.ProcessStatusID == 17"
                                    class="smaller-font"
                                    ><br />{{ jp.ActualTimeSpent }}</span
                                  >
                                </span>
                              </div>
                            </a>
                          </li>
                        </ng-container>
                        <span
                          id="pnIndicatorOne"
                          class="pn-ProductNav_Indicator"
                        ></span>
                      </div>
                    </nav>
                    <button
                      id="pnAdvancerLeftOne"
                      class="pn-Advancer pn-Advancer_Left bg-white"
                      type="button"
                    >
                      <i class="fas fa-chevron-left primary-font"></i>
                    </button>
                    <button
                      id="pnAdvancerRightOne"
                      class="pn-Advancer pn-Advancer_Right bg-white"
                      type="button"
                    >
                      <i class="fas fa-chevron-right primary-font"></i>
                    </button>
                  </div>
                </ul>
              </div>
            </div>
            <!-- progress bar -->
            <!-- <div class="row justify-content-center">
                        <div class="col-11 py-2">
                            <span>
                                <ngb-progressbar type=""
                                    [value]="jc.QAStatusID ==17? 100 : jc.ApprovalStatusID == 17? 80 : jc.PPStatusID == 17? 60 : jc.IRStatusID == 17 ? 40 : jc.VIStatusID == 17 ? 20 : 0"
                                    height=".5rem"></ngb-progressbar>
                            </span>
                        </div>
                    </div> -->
          </div>
          <div
            class="row w-100 mx-0"
            *ngIf="
              (
                _sharedService.jobObj.JCBasicInfoList
                | filter: _sharedService.jobCardTab:'CurrentJobStatus'
              ).length > 1 &&
              (
                _sharedService.jobObj.JCBasicInfoList
                | filter: _sharedService.jobCardTab:'CurrentJobStatus'
              ).length != i
            "
          >
            <hr class="w-100 my-2" />
          </div>
        </ng-container>
        <div
          class="row justify-content-center my-3 mb-md-5"
          *ngIf="
            _sharedService.jobObj != undefined &&
            _sharedService.jobObj.JCBasicInfoList != undefined &&
            (
              _sharedService.jobObj.JCBasicInfoList
              | filter: 19:'CurrentJobStatus'
              | searchJobCard: searchQuery
            ).length >= 1
          "
        >
          <ngb-pagination
            *ngIf="_sharedService.jobObj.JCBasicInfo.NewCount > 10"
            (pageChange)="
              getAllJobCards((filter.TabID = 19), (filter.pageNumber = $event))
            "
            [collectionSize]="_sharedService.jobObj.JCBasicInfo.NewCount"
            [(page)]="filter.pageNumber"
            aria-label="Default pagination"
            class="pagination-primary mb-md-4"
          >
          </ngb-pagination>
        </div>
      </ng-container>
      <ng-container *ngIf="_sharedService.jobCardTab == 20">
        <ng-container
          *ngFor="
            let jc of _sharedService.jobObj.JCBasicInfoList
              | filter: 20:'CurrentJobStatus'
              | searchJobCard: searchQuery
              | slice
                : (cPage - 1) * _sharedService.pageSize
                : (cPage - 1) * _sharedService.pageSize +
                    _sharedService.pageSize;
            let i = index
          "
        >
          <div class="card inner-card-shadow mb-0">
            <!-- card-header -->
            <div
              class="card-header list-card-header light-bold mb-2 bg-white bb-0"
            >
              <div class="d-flex justify-content-between">
                <span class="card-number">{{ jc.JobCardNumber }} </span>
                <span class="serial-number">{{ jc.SeriesID }} </span>
                <span
                  *ngIf="jc.IsContractVehicles == true"
                  class="contract-number"
                  >Service Contract Customer</span
                >
              </div>
              <div class="row pt-1 mx-0">
                <div class="col-12 pt-2 px-1">
                  <div class="row justify-content-end mx-0 primary-dark-font">
                    <span
                      class="col-6 text-right"
                      *ngIf="
                        (_sharedService.logged_user_role_id == 1 ||
                          _sharedService.logged_user_role_id == 2) &&
                        jc.IsTaxFree == true
                      "
                    >
                      <label class="primary-dark-font">Tax Free Card</label>
                      <i
                        class="px-2 fas fa-image pointer"
                        title="View Document"
                        (click)="openFile(jc.JobCardID)"
                      ></i>

                      <ng-container
                        *ngIf="
                          (_sharedService.logged_user_role_id == 1 ||
                            _sharedService.logged_user_role_id == 2) &&
                          jc.IsTaxFreeApproved == false
                        "
                      >
                        <button
                          class="
                            a-button
                            btn btn-primary btn-round btn-simple
                            font-8
                            px-1
                            py-1
                            my-0
                          "
                          title="Approve"
                          (click)="setTaxFree(true, jc.JobCardID)"
                        >
                          Approve
                        </button>

                        <button
                          class="
                            a-button
                            btn btn-primary btn-round btn-simple
                            font-8
                            px-1
                            py-1
                            my-0
                          "
                          title="Reject"
                          (click)="setNotTaxFree(false, jc.JobCardID)"
                        >
                          Reject
                        </button>
                      </ng-container>
                    </span>

                    <span class="col-6 text-right">
                      <i
                        *ngIf="
                          _sharedService.logged_user_role_id == 1 ||
                          _sharedService.logged_user_role_id == 2 ||
                          _sharedService.logged_user_role_id == 3 ||
                          _sharedService.logged_user_role_id == 4 ||
                          _sharedService.logged_user_role_id == 5 ||
                          (_sharedService.user?.Roles
                            | editAcceptedJob
                              : _sharedService.logged_user_id
                              : _sharedService.jobObj.JobProcess
                              : jc.JobCardID)
                        "
                        class="px-2 fas fa-eye pointer"
                        title="View"
                        [routerLink]="['/', 'job', 'detail']"
                        [queryParams]="{ JobCardID: jc.JobCardID }"
                      ></i>

                      <i
                        *ngIf="
                          _sharedService.logged_user_role_id == 1 ||
                          _sharedService.logged_user_role_id == 2 ||
                          _sharedService.logged_user_role_id == 3 ||
                          _sharedService.logged_user_role_id == 4 ||
                          _sharedService.logged_user_role_id == 5 ||
                          (_sharedService.user?.Roles
                            | editAcceptedJob
                              : _sharedService.logged_user_id
                              : _sharedService.jobObj.JobProcess
                              : jc.JobCardID)
                        "
                        class="px-2 fas fa-search"
                        title="View"
                        [routerLink]="['/', 'part', 'compare-parts']"
                        [queryParams]="{ JobCardID: jc.JobCardID }"
                      ></i>

                      <i
                        *ngIf="
                          _sharedService.logged_user_role_id == 1 ||
                          _sharedService.logged_user_role_id == 2 ||
                          _sharedService.logged_user_role_id == 3 ||
                          _sharedService.logged_user_role_id == 4 ||
                          _sharedService.logged_user_role_id == 5 ||
                          (_sharedService.user?.Roles
                            | editAcceptedJob
                              : _sharedService.logged_user_id
                              : _sharedService.jobObj.JobProcess
                              : jc.JobCardID)
                        "
                        class="px-2 fas fa-edit pointer"
                        title="Edit"
                        [routerLink]="
                          _sharedService.logged_user_role_id == 5 ||
                          _sharedService.logged_user_role_id == 6 ||
                          _sharedService.logged_user_role_id == 8
                            ? [
                                '/',
                                'update-job',
                                jc.JobCardID,
                                'inspection-results'
                              ]
                            : _sharedService.logged_user_role_id == 4
                            ? [
                                '/',
                                'update-job',
                                jc.JobCardID,
                                'basic-info-view'
                              ]
                            : ['/', 'update-job', jc.JobCardID, 'basic-info']
                        "
                      ></i>

                      <i
                        *ngIf="
                          _sharedService.logged_user_role_id == 1 ||
                          _sharedService.logged_user_role_id == 2 ||
                          _sharedService.logged_user_role_id == 3
                        "
                        class="px-2 fas fa-comment-alt pointer"
                        title="Feedback"
                        [routerLink]="['/', 'customer', 'customer-feedback']"
                        [queryParams]="{
                          JobCardID: jc.JobCardID,
                          CustomerID: jc.CustomerID
                        }"
                      ></i>

                      <i
                        *ngIf="
                          _sharedService.logged_user_role_id == 1 ||
                          _sharedService.logged_user_role_id == 2
                        "
                        class="px-2 fas fa-trash-alt pointer pointer"
                        title="Delete"
                        (click)="openModal(warningDelete, jc.JobCardID)"
                      ></i>
                    </span>

                    <!-- <i *ngIf="_sharedService.logged_user_role_id == 5 || _sharedService.logged_user_role_id == 8"
                                    class="fas fa-car pointer m-2 pointer" title="Vehicle Profile"
                                    [routerLink]="['/','vehicle','view']"
                                    [queryParams]="{VehicleID : jc.VehicleID}"></i> -->
                  </div>
                </div>

                <div
                  class="row col-12 primary-dark-font pt-1 pl-lg-4 mx-0 ipad"
                >
                  <div class="col-3 row mx-0">
                    <div class="col-12 bold-font">
                      <i class="fas fa-user mr-2 primary-font" title="Name"></i>
                      <label>{{ jc.CustomerFullName }} </label>
                    </div>

                    <div class="col-12 bold-font">
                      <i
                        class="fas fa-mobile-alt mr-2 primary-font"
                        title="Phone"
                      ></i>
                      <label>{{ jc.ContactPersonMobile }}</label>
                    </div>
                  </div>

                  <div class="col-3 row mx-0">
                    <div
                      class="col-12 align-self-center pointer bold-font px-0"
                      title="Make Model Year"
                    >
                      <a
                        class="primary-dark-font"
                        [routerLink]="['/', 'vehicle', 'view']"
                        [queryParams]="{ VehicleID: jc.VehicleID }"
                      >
                        <i
                          class="fas fa-car mr-2 fa-lg primary-font"
                          title="Make Model Year"
                        ></i>
                        <span class="pointer"
                          >{{ jc.EnglishMakeName }}
                          {{ jc.EnglishModelName }}
                          {{ jc.ProductionYear }}</span
                        >
                      </a>
                    </div>

                    <div class="col-12 align-self-center bold-font px-0">
                      <i
                        class="ts plate-number-icon mr-2"
                        title="Plate Number"
                      ></i>
                      <label>{{ jc.PlateNumber }}</label>
                    </div>
                  </div>

                  <div class="col-3 row mx-0">
                    <div class="col-12" title="Check-in time">
                      <i class="fas fa-angle-right mr-1 primary-font"></i
                      ><i class="fas fa-clock mr-1 primary-font"></i>
                      <label>{{ jc.JobOpenDate | date: "short" }}</label>
                    </div>
                    <div class="col-12" title="Checkout time">
                      <i class="fas fa-angle-left mr-1 primary-font"></i
                      ><i class="fas fa-clock mr-1 primary-font"></i>
                      <label>{{ jc.JobCloseDate | date: "short" }}</label>
                    </div>
                  </div>
                  <!-- foreman supervisor -->
                  <div class="col-3 row mx-0">
                    <div class="col-12">
                      <i class="ts foreman-icon mr-2" title="Foreman"></i>
                      <label *ngIf="jc.ForemanName != undefined">{{
                        jc.ForemanName
                      }}</label>
                      <span
                        *ngIf="
                          jc.ForemanName == undefined || jc.ForemanName == ''
                        "
                      >
                        <label
                          class="primary-font"
                          *ngIf="
                            _sharedService.logged_user_role_id == 1 ||
                            _sharedService.logged_user_role_id == 2 ||
                            _sharedService.logged_user_role_id == 4
                          "
                          >Assign Foreman</label
                        >
                        <label
                          *ngIf="
                            _sharedService.logged_user_role_id != 1 &&
                            _sharedService.logged_user_role_id != 2 &&
                            _sharedService.logged_user_role_id != 4
                          "
                          >-</label
                        >
                      </span>

                      <i
                        class="fas fa-edit mx-2 primary-font"
                        *ngIf="
                          (_sharedService.logged_user_role_id == 1 ||
                            _sharedService.logged_user_role_id == 2 ||
                            _sharedService.logged_user_role_id == 4) &&
                          jc.StatusID != 25 &&
                          (jc.VIStatusID == 17 ||
                            (
                              _sharedService.jobObj.JobParts
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: true:'IsInclude'
                            ).length > 0 ||
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: true:'IsInclude'
                            ).length > 0)
                        "
                        (click)="
                          openAssignTechnician(assignTechModal, jc.JobCardID, 1)
                        "
                      ></i>
                    </div>

                    <div class="col-12">
                      <i class="ts supervisor-icon mr-2" title="Supervisor"></i>
                      <label *ngIf="jc.SupervisorName != undefined">{{
                        jc.SupervisorName
                      }}</label>
                      <span
                        *ngIf="
                          jc.SupervisorName == undefined ||
                          jc.SupervisorName == ''
                        "
                      >
                        <label
                          class="primary-font"
                          *ngIf="
                            _sharedService.logged_user_role_id == 1 ||
                            _sharedService.logged_user_role_id == 2 ||
                            _sharedService.logged_user_role_id == 3
                          "
                          >Assign Supervisor</label
                        >
                        <label
                          *ngIf="
                            _sharedService.logged_user_role_id != 1 &&
                            _sharedService.logged_user_role_id != 2 &&
                            _sharedService.logged_user_role_id != 3
                          "
                          >-</label
                        >
                      </span>

                      <i
                        class="fas fa-edit mx-2 primary-font"
                        *ngIf="
                          (_sharedService.logged_user_role_id == 1 ||
                            _sharedService.logged_user_role_id == 2 ||
                            _sharedService.logged_user_role_id == 3) &&
                          jc.StatusID != 25 &&
                          (jc.VIStatusID == 17 ||
                            (
                              _sharedService.jobObj.JobParts
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: true:'IsInclude'
                            ).length > 0 ||
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: true:'IsInclude'
                            ).length > 0)
                        "
                        (click)="
                          openAssignTechnician(assignTechModal, jc.JobCardID, 2)
                        "
                      ></i>
                    </div>
                  </div>

                  <!-- assign technicians dropdown -->
                  <div
                    class="col-12 row"
                    *ngIf="
                      _sharedService.logged_user_role_id != 3 &&
                      jc.ApprovalStatusID == 17 &&
                      jc.QAStatusID != 17
                    "
                  >
                    <div
                      class="
                        floating-label
                        form-group
                        col-lg-3 col-sm-4
                        mb-0
                        pb-0
                        pt-2
                        text-center
                      "
                    >
                      <span
                        >{{
                          jc.MechanicID == undefined
                            ? "Choose Mechanic"
                            : (_sharedService.jobObj.Employees
                                | filter: jc.MechanicID:"UserID")[0]
                                .EmployeeFullName
                        }}
                        <i
                          class="fas fa-edit mx-2 primary-font"
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 70:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length > 0
                          "
                          (click)="
                            openAssignTechnician(
                              assignTechModal,
                              jc.JobCardID,
                              96
                            )
                          "
                        ></i>
                        <small
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 70:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length == 0
                          "
                          >(No task)</small
                        >
                      </span>
                    </div>

                    <div
                      class="
                        floating-label
                        form-group
                        col-lg-3 col-sm-4
                        mb-0
                        pb-0
                        pt-2
                        text-center
                      "
                    >
                      <span
                        >{{
                          jc.ElectricianID == undefined
                            ? "Choose Electrician"
                            : (_sharedService.jobObj.Employees
                                | filter: jc.ElectricianID:"UserID")[0]
                                .EmployeeFullName
                        }}
                        <i
                          class="fas fa-edit mx-2 primary-font"
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 71:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length > 0
                          "
                          (click)="
                            openAssignTechnician(
                              assignTechModal,
                              jc.JobCardID,
                              95
                            )
                          "
                        ></i>
                        <small
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 71:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length == 0
                          "
                          >(No task)</small
                        >
                      </span>
                    </div>

                    <div
                      class="
                        floating-label
                        form-group
                        col-lg-3 col-sm-4
                        mb-0
                        pb-0
                        pt-2
                        text-center
                      "
                    >
                      <span
                        >{{
                          jc.OtherTechID == undefined
                            ? "Choose Other"
                            : (_sharedService.jobObj.Employees
                                | filter: jc.OtherTechID:"UserID")[0]
                                .EmployeeFullName
                        }}
                        <i
                          class="fas fa-edit mx-2 primary-font"
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 102:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length > 0
                          "
                          (click)="
                            openAssignTechnician(
                              assignTechModal,
                              jc.JobCardID,
                              97
                            )
                          "
                        ></i>
                        <small
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 102:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length == 0
                          "
                          >(No task)</small
                        >
                      </span>
                    </div>

                    <div
                      class="
                        floating-label
                        form-group
                        col-lg-3 col-sm-4
                        mb-0
                        pb-0
                        pt-2
                        text-center
                      "
                    >
                      <span
                        >{{
                          jc.InspectionID == undefined
                            ? "Choose Inspection"
                            : (_sharedService.jobObj.Employees
                                | filter: jc.InspectionID:"UserID")[0]
                                .EmployeeFullName
                        }}
                        <i
                          class="fas fa-edit mx-2 primary-font"
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 139:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length > 0
                          "
                          (click)="
                            openAssignTechnician(
                              assignTechModal,
                              jc.JobCardID,
                              139
                            )
                          "
                        ></i>
                        <small
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 139:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length == 0
                          "
                          >(No task)</small
                        >
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row w-100 mx-0 collapse-margin-top">
              <hr class="divider" />
              <a
                class="collapse-tabset btn p-0"
                data-toggle="collapse"
                href="#card{{ jc.JobCardID }}"
                role="button"
                (click)="collapseJC($event, jc.JobCardID)"
                aria-expanded="false"
                aria-controls="jc.JobCardID"
              >
                <i
                  class="fas fa-chevron-down hover-color px-3 pt-3 pb-2"
                  id="{{ jc.JobCardID }}"
                ></i>
              </a>
            </div>
            <div class="collapse" id="card{{ jc.JobCardID }}">
              <div class="row card-body-font my-0 bb-1 mx-3">
                <div class="col-lg-12 col-sm-12 px-2">
                  <ngb-tabset class="jl-tabset">
                    <ngb-tab title="Concerns">
                      <ng-template ngbTabContent>
                        <div class="p-0 card-scroll card-height">
                          <table class="table table-striped primary-dark-font">
                            <thead>
                              <tr>
                                <th scope="col">ID</th>
                                <th scope="col">Complaint</th>
                                <th scope="col">Type</th>
                                <th scope="col">Cost</th>
                                <th scope="col">Status</th>
                              </tr>
                            </thead>

                            <tbody>
                              <tr
                                class="hovered"
                                *ngFor="
                                  let concern of _sharedService.jobObj
                                    .JobConcerns
                                    | filter: jc.JobCardID:'JobCardID';
                                  let idx = index
                                "
                              >
                                <td>{{ idx + 1 }}</td>
                                <td>{{ concern.ConcernDescription }}</td>
                                <td>{{ concern.ConcernTypeName }}</td>
                                <td>{{ concern.TotalCost }}</td>
                                <td>
                                  <span *ngIf="concern.IsApproved == true"
                                    >Approved</span
                                  >
                                  <span *ngIf="concern.IsApproved != true"
                                    >Not Approved</span
                                  >
                                </td>
                              </tr>
                            </tbody>
                            <tbody
                              *ngIf="
                                _sharedService.jobObj.JobConcerns ==
                                  undefined ||
                                (_sharedService.jobObj.JobConcerns !=
                                  undefined &&
                                  (
                                    _sharedService.jobObj.JobConcerns
                                    | filter: jc.JobCardID:'JobCardID'
                                  ).length == 0)
                              "
                            >
                              <tr scope="row">
                                <td colspan="12" class="text-center">
                                  No Concern Added!
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </ng-template>
                    </ngb-tab>

                    <ngb-tab title="Tasks">
                      <ng-template ngbTabContent>
                        <div class="card main-card no-border list-card">
                          <div class="p-0 card-scroll card-height t-responsive">
                            <table
                              class="table table-striped primary-dark-font"
                            >
                              <thead>
                                <tr>
                                  <th class="th1" scope="col">ID</th>
                                  <th class="th1" scope="col">Name</th>
                                  <th class="th1" scope="col">Type</th>
                                  <th class="th1" scope="col">Category</th>
                                  <th class="th1" scope="col">Start Time</th>
                                  <th class="th1" scope="col">End Time</th>
                                  <!-- <th scope="col"
                                                                *ngIf="_sharedService.logged_user_role_id == 1 || _sharedService.logged_user_role_id == 2 || _sharedService.logged_user_role_id == 3 || _sharedService.logged_user_role_id == 4 || _sharedService.logged_user_role_id == 5">
                                                                Labor</th> -->
                                  <th class="th1" scope="col">AssignedTo</th>
                                  <th class="th1" scope="col">Status</th>
                                </tr>
                              </thead>
                              <!-- <div class="row">
                                                        
                                                    </div> -->
                              <tbody
                                *ngIf="
                                  _sharedService.jobObj.JobTasks == undefined ||
                                  (_sharedService.jobObj.JobTasks !=
                                    undefined &&
                                    (
                                      _sharedService.jobObj.JobTasks
                                      | filter: jc.JobCardID:'JobCardID'
                                      | filter: 51:'JobTaskTypeID'
                                    ).length == 0)
                                "
                              >
                                <tr scope="row">
                                  <td colspan="12" class="text-center">
                                    No Task Added!
                                  </td>
                                </tr>
                              </tbody>
                              <!-- before approval -->
                              <tbody *ngIf="jc.ApprovalStatusID != 17">
                                <tr
                                  class="hovered"
                                  title="Task"
                                  (click)="
                                    openTaskModal(taskModel, jt.JobTaskID)
                                  "
                                  *ngFor="
                                    let jt of _sharedService.jobObj.JobTasks
                                      | filter: jc.JobCardID:'JobCardID'
                                      | filter: 51:'JobTaskTypeID';
                                    let idx = index
                                  "
                                >
                                  <td class="td1">{{ idx + 1 }}</td>
                                  <td class="td1">
                                    <span
                                      appElseHyphen
                                      [elseHyphen]="jt.LaborDescriptionEng"
                                    ></span>
                                  </td>
                                  <td class="td1">{{ jt.JobTaskTypeName }}</td>
                                  <td class="td1">{{ jt.RepairTypeName }}</td>
                                  <td class="td1">
                                    {{ jt.AcceptedDateTime | date: "short" }}
                                  </td>
                                  <td class="td1">
                                    {{ jt.EndDateTime | date: "short" }}
                                  </td>
                                  <!-- <td
                                                                *ngIf="_sharedService.logged_user_role_id == 1 || _sharedService.logged_user_role_id == 2 || _sharedService.logged_user_role_id == 3 || _sharedService.logged_user_role_id == 4 || _sharedService.logged_user_role_id == 5">
                                                                {{jt.LaborPrice}}</td> -->
                                  <td class="td1">
                                    <span
                                      *ngIf="jt.EmployeeFullName != undefined"
                                      >{{ jt.EmployeeFullName }}</span
                                    >
                                    <span
                                      *ngIf="
                                        jt.EmployeeFullName == undefined ||
                                        jt.EmployeeFullName == ''
                                      "
                                      >N/A</span
                                    >
                                  </td>
                                  <td class="td1">
                                    {{
                                      jt.TaskStatusID == 17
                                        ? "Completed"
                                        : jt.TaskStatusID == 16
                                        ? "In Progress"
                                        : "Not Assigned"
                                    }}
                                  </td>
                                </tr>
                              </tbody>
                              <!-- after approval  -->
                              <tbody *ngIf="jc.ApprovalStatusID == 17">
                                <tr
                                  class="hovered"
                                  title="Task"
                                  (click)="
                                    openTaskModal(taskModel, jt.JobTaskID)
                                  "
                                  *ngFor="
                                    let jt of _sharedService.jobObj.JobTasks
                                      | filter: jc.JobCardID:'JobCardID'
                                      | filter: 51:'JobTaskTypeID'
                                      | filter: true:'IsInclude';
                                    let idx = index
                                  "
                                >
                                  <td>{{ idx + 1 }}</td>
                                  <td>
                                    <span
                                      appElseHyphen
                                      [elseHyphen]="jt.LaborDescriptionEng"
                                    ></span>
                                  </td>
                                  <td>{{ jt.JobTaskTypeName }}</td>
                                  <td>{{ jt.RepairTypeName }}</td>
                                  <td>
                                    {{ jt.AcceptedDateTime | date: "short" }}
                                  </td>
                                  <td>{{ jt.EndDateTime | date: "short" }}</td>
                                  <!-- <td
                                                                *ngIf="_sharedService.logged_user_role_id == 1 || _sharedService.logged_user_role_id == 2 || _sharedService.logged_user_role_id == 3 || _sharedService.logged_user_role_id == 4 || _sharedService.logged_user_role_id == 5">
                                                                {{jt.LaborPrice}}</td> -->
                                  <td>
                                    <span
                                      *ngIf="jt.EmployeeFullName != undefined"
                                      >{{ jt.EmployeeFullName }}</span
                                    >
                                    <span
                                      *ngIf="
                                        jt.EmployeeFullName == undefined ||
                                        jt.EmployeeFullName == ''
                                      "
                                      >N/A</span
                                    >
                                  </td>
                                  <td>
                                    {{
                                      jt.TaskStatusID == 17
                                        ? "Completed"
                                        : jt.TaskStatusID == 16
                                        ? "In Progress"
                                        : "Not Assigned"
                                    }}
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </ng-template>
                    </ngb-tab>

                    <ngb-tab title="Parts">
                      <ng-template ngbTabContent>
                        <div class="card main-card no-border list-card">
                          <div class="p-0 card-scroll card-height">
                            <table
                              class="table table-striped primary-dark-font"
                            >
                              <thead>
                                <tr>
                                  <th scope="col">ID</th>
                                  <th scope="col">Part</th>
                                  <th scope="col">Concern</th>
                                  <th scope="col">Status</th>
                                  <th
                                    scope="col"
                                    *ngIf="
                                      _sharedService.logged_user_role_id == 1 ||
                                      _sharedService.logged_user_role_id == 2 ||
                                      _sharedService.logged_user_role_id == 3 ||
                                      _sharedService.logged_user_role_id == 6
                                    "
                                  >
                                    Price
                                  </th>
                                </tr>
                              </thead>

                              <tbody
                                *ngIf="
                                  _sharedService.jobObj.JobParts == undefined ||
                                  (_sharedService.jobObj.JobParts !=
                                    undefined &&
                                    (
                                      _sharedService.jobObj.JobParts
                                      | filter: jc.JobCardID:'JobCardID'
                                    ).length == 0)
                                "
                              >
                                <tr scope="row">
                                  <td colspan="12" class="text-center">
                                    No Part Added!
                                  </td>
                                </tr>
                              </tbody>
                              <tbody>
                                <tr
                                  class="hovered"
                                  *ngFor="
                                    let jp of _sharedService.jobObj.JobParts
                                      | filter: jc.JobCardID:'JobCardID'
                                      | filter
                                        : (jc.ApprovalStatusID == 17
                                            ? true
                                            : '')
                                        : 'IsInclude';
                                    let idx = index
                                  "
                                >
                                  <td>{{ idx + 1 }}</td>
                                  <td>{{ jp.PartNameEnglish }}</td>
                                  <td>{{ jp.ConcernDescription }}</td>
                                  <td>
                                    <span
                                      *ngIf="
                                        _sharedService.logged_user_role_id ==
                                          3 ||
                                        _sharedService.logged_user_role_id == 4
                                      "
                                      >{{
                                        jp.IsInclude == true
                                          ? jp.JobPartStatusName
                                          : "Not Approved"
                                      }}</span
                                    >
                                    <!-- for manager -->
                                    <ng-select
                                      placeholder="Select Status"
                                      *ngIf="
                                        _sharedService.logged_user_role_id ==
                                          1 ||
                                        _sharedService.logged_user_role_id == 2
                                      "
                                      class="custom dropdown-scale"
                                      appendTo="#job-list"
                                      name="partDelivery"
                                      (change)="changePartStatus(jp)"
                                      [(ngModel)]="jp.JobPartStatusName"
                                    >
                                      <ng-option
                                        *ngFor="
                                          let item of _sharedService._commonMeta
                                            .ObjectStatus
                                            | filter
                                              : 'PartDelivery'
                                              : 'ObjectNameEnglish'
                                        "
                                        [value]="item.StatusNameEnglish"
                                      >
                                        {{ item.StatusNameEnglish }}
                                      </ng-option>
                                    </ng-select>
                                  </td>
                                  <td
                                    *ngIf="
                                      _sharedService.logged_user_role_id == 1 ||
                                      _sharedService.logged_user_role_id == 2 ||
                                      _sharedService.logged_user_role_id == 3 ||
                                      _sharedService.logged_user_role_id == 6
                                    "
                                  >
                                    {{ jp.SellingPrice }}
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </ng-template>
                    </ngb-tab>

                    <ngb-tab title="External Tasks">
                      <ng-template ngbTabContent>
                        <div class="card main-card no-border list-card">
                          <div class="p-0 card-scroll card-height">
                            <table
                              class="table table-striped primary-dark-font"
                            >
                              <thead>
                                <tr>
                                  <th scope="col">ID</th>
                                  <th scope="col">Task</th>
                                  <th scope="col">Location</th>
                                </tr>
                              </thead>

                              <tbody
                                *ngIf="
                                  _sharedService.jobObj.JobTasks == undefined ||
                                  (_sharedService.jobObj.JobTasks !=
                                    undefined &&
                                    (
                                      _sharedService.jobObj.JobTasks
                                      | filter: jc.JobCardID:'JobCardID'
                                      | filter: 52:'JobTaskTypeID'
                                    ).length == 0)
                                "
                              >
                                <tr scope="row">
                                  <td colspan="12" class="text-center">
                                    No External Task Added!
                                  </td>
                                </tr>
                              </tbody>

                              <tbody>
                                <tr
                                  class="hovered"
                                  (click)="
                                    openTaskModal(taskModel, jt.JobTaskID)
                                  "
                                  *ngFor="
                                    let jt of _sharedService.jobObj.JobTasks
                                      | filter: jc.JobCardID:'JobCardID'
                                      | filter: 52:'JobTaskTypeID';
                                    let idx = index
                                  "
                                >
                                  <td>{{ idx + 1 }}</td>
                                  <td>
                                    <span
                                      appElseHyphen
                                      [elseHyphen]="jt.LaborDescriptionEng"
                                    ></span>
                                  </td>
                                  <td>{{ jt.Location }}</td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </ng-template>
                    </ngb-tab>
                  </ngb-tabset>
                </div>
              </div>
            </div>
            <!-- card footer -->
            <div class="card-footer text-muted crumbs-footer bt-0">
              <div
                id="crumbs"
                class="col-12 justify-content-center primary-font"
              >
                <ul class="align-self-center">
                  <div class="pn-ProductNav_Wrapper">
                    <nav id="pnProductNavOne" class="pn-ProductNav">
                      <div
                        id="pnProductNavContentsOne"
                        class="pn-ProductNav_Contents mb-1"
                      >
                        <!-- let jt of _sharedService.jobObj.JobTasks  | filter : jc.JobCardID : 'JobCardID' | filter: 51 : 'JobTaskTypeID' -->
                        <ng-container
                          *ngFor="
                            let jp of _sharedService.jobObj.JobProcess
                              | filter: jc.JobCardID:'JobCardID';
                            let id = index
                          "
                        >
                          <li
                            class="pn-ProductNav_LinkOne"
                            aria-selected="true"
                            [ngClass]="{
                              'current-process':
                                jp.ProcessTypeID == jc.ActiveProcess,
                              'completed-process': jp.ProcessStatusID == 17
                            }"
                          >
                            <a class="mb-2">
                              <div
                                class="
                                  floating-label
                                  form-group
                                  col-auto
                                  float-left
                                  d-flex
                                  align-items-center
                                  i-floating-label
                                  w-100
                                  justify-content-center
                                  flex-wrap
                                  pb-0
                                  px-lg-3
                                "
                              >
                                <span class="float-left m-0 mx-lg-1">
                                  <!-- job process names -->
                                  <span class="pointer">
                                    <i class="{{ jp.Icon }} mr-2"></i>
                                    <ng-container
                                      *ngIf="
                                        jp.ProcessStatusID != 17 &&
                                        jp.ProcessTypeID != 11
                                      "
                                    >
                                      <i
                                        class="fas fa-edit mr-1"
                                        [ngClass]="
                                          _sharedService.logged_user_role_id ==
                                            4 && jp.ProcessTypeID == 9
                                            ? 'hover-color'
                                            : 'primary-dark-font'
                                        "
                                        (click)="
                                          openAssignModal(
                                            assignProcessModal,
                                            jp
                                          )
                                        "
                                        *ngIf="
                                          _sharedService.logged_user_role_id ==
                                            1 ||
                                          _sharedService.logged_user_role_id ==
                                            2 ||
                                          (_sharedService.logged_user_role_id ==
                                            3 &&
                                            jp.ProcessTypeID == 8) ||
                                          _sharedService.logged_user_role_id ==
                                            4
                                        "
                                      ></i>
                                    </ng-container>
                                    <small
                                      [ngClass]="
                                        _sharedService.logged_user_role_id ==
                                          4 && jp.ProcessTypeID == 9
                                          ? 'hover-color'
                                          : 'primary-dark-font'
                                      "
                                      class="small-font progress-heading"
                                      >{{ jp.TypeNameEnglish }}</small
                                    >

                                    <i
                                      class="
                                        far
                                        fa-check-circle
                                        ml-1
                                        hover-color
                                      "
                                      *ngIf="jp.ProcessStatusID == 17"
                                    ></i>

                                    <span
                                      *ngIf="
                                        jp.ProcessStatusID != 17 &&
                                        jp.ProcessTypeID != 9
                                      "
                                      class="hover-color"
                                    >
                                      <br />
                                      <span *ngIf="jp.ProcessStatusID == 16"
                                        >Accepted</span
                                      >
                                      <span *ngIf="jp.ProcessStatusID == 15"
                                        >Pending</span
                                      >
                                      <span *ngIf="jp.ProcessStatusID == null"
                                        >Un Assigned</span
                                      >
                                    </span>
                                    <!-- <span
                                                                    class="progress-abbr bold-font">{{jp.ProcessAbbrevation}}</span> -->
                                    <!-- <i class="ts check-mark" title="Job Done"></i> -->
                                  </span>
                                  <!-- dropdown  -->
                                  <!-- <div class="pt-2"
                                                                *ngIf="jp.ShowDropdown == true && jp.ProcessStatusID != 17 && jp.ProcessTypeID != 11">
                                                                <ng-select class="custom-job-dropdown"
                                                                    *ngIf="_sharedService.logged_user_role_id == 1 || _sharedService.logged_user_role_id == 2 || (_sharedService.logged_user_role_id == 3 && jp.ProcessTypeID == 8) || _sharedService.logged_user_role_id == 4"
                                                                    (change)="assignJP(jp)"
                                                                    name="{{jc.JobCardID}}{{id}}"
                                                                    appendTo="#job-list" id="{{jc.JobCardID}}{{id}}"
                                                                    [(ngModel)]="jp.EmployeeID">
                                                                    <ng-container
                                                                        *ngFor="let emp of _sharedService.jobObj.Employees | employeeFilter: jp.ProcessTypeID : 'RoleID' : _sharedService.jobObj.UserRoles">
                                                                        <ng-option [value]="emp.UserID"
                                                                            (click)="jp.ShowDropdown = true">
                                                                            {{emp.EmployeeFullName}}
                                                                        </ng-option>
                                                                    </ng-container>
                                                                </ng-select>
                                                            </div> -->

                                  <!-- technician name  -->
                                  <span
                                    *ngIf="jp.EmployeeID != undefined"
                                    class="smaller-font"
                                    ><br />{{ jp.EmployeeFullName }}
                                    <ng-container *ngIf="jp.ProcessTypeID == 9">
                                      <span *ngIf="jc.IsIRCompleted == 1">
                                        <i
                                          title="Completed"
                                          class="fas fa-check"
                                        ></i>
                                      </span>
                                      <span *ngIf="jc.IsIRCompleted != 1">
                                        <i
                                          title="In Progress"
                                          class="fas fa-hourglass-half"
                                        ></i>
                                      </span>
                                    </ng-container>
                                  </span>

                                  <!-- for IR show tech and high authority progress -->
                                  <span *ngIf="jp.ProcessTypeID == 9">
                                    <br />
                                    High Authority
                                    <span *ngIf="jp.ProcessStatusID == 17"
                                      ><i
                                        title="Completed"
                                        class="fas fa-check"
                                      ></i
                                    ></span>
                                    <span *ngIf="jp.ProcessStatusID != 17"
                                      ><i
                                        title="In Progress"
                                        class="fas fa-hourglass-half"
                                      ></i
                                    ></span>
                                  </span>

                                  <span
                                    *ngIf="jp.ProcessStatusID == 17"
                                    class="smaller-font"
                                    ><br />{{ jp.ActualTimeSpent }}</span
                                  >
                                </span>
                              </div>
                            </a>
                          </li>
                        </ng-container>
                        <span
                          id="pnIndicatorOne"
                          class="pn-ProductNav_Indicator"
                        ></span>
                      </div>
                    </nav>
                    <button
                      id="pnAdvancerLeftOne"
                      class="pn-Advancer pn-Advancer_Left bg-white"
                      type="button"
                    >
                      <i class="fas fa-chevron-left primary-font"></i>
                    </button>
                    <button
                      id="pnAdvancerRightOne"
                      class="pn-Advancer pn-Advancer_Right bg-white"
                      type="button"
                    >
                      <i class="fas fa-chevron-right primary-font"></i>
                    </button>
                  </div>
                </ul>
              </div>
            </div>
            <!-- progress bar -->
            <!-- <div class="row justify-content-center">
                    <div class="col-11 py-2">
                        <span>
                            <ngb-progressbar type=""
                                [value]="jc.QAStatusID ==17? 100 : jc.ApprovalStatusID == 17? 80 : jc.PPStatusID == 17? 60 : jc.IRStatusID == 17 ? 40 : jc.VIStatusID == 17 ? 20 : 0"
                                height=".5rem"></ngb-progressbar>
                        </span>
                    </div>
                </div> -->
          </div>
          <div
            class="row w-100 mx-0"
            *ngIf="
              (
                _sharedService.jobObj.JCBasicInfoList
                | filter: _sharedService.jobCardTab:'CurrentJobStatus'
              ).length > 1 &&
              (
                _sharedService.jobObj.JCBasicInfoList
                | filter: _sharedService.jobCardTab:'CurrentJobStatus'
              ).length != i
            "
          >
            <hr class="w-100 my-2" />
          </div>
        </ng-container>
        <div
          class="row justify-content-center my-3 mb-md-5"
          *ngIf="
            _sharedService.jobObj != undefined &&
            _sharedService.jobObj.JCBasicInfoList != undefined &&
            (
              _sharedService.jobObj.JCBasicInfoList
              | filter: 20:'CurrentJobStatus'
              | searchJobCard: searchQuery
            ).length >= 1
          "
        >
          <ngb-pagination
            *ngIf="_sharedService.jobObj.JCBasicInfo.InspectionCount > 10"
            (pageChange)="
              getAllJobCards((filter.TabID = 20), (filter.pageNumber = $event))
            "
            [collectionSize]="_sharedService.jobObj.JCBasicInfo.InspectionCount"
            [(page)]="filter.pageNumber"
            aria-label="Default pagination"
            class="pagination-primary mb-md-4"
          >
          </ngb-pagination>
        </div>
      </ng-container>
      <ng-container *ngIf="_sharedService.jobCardTab == 21">
        <ng-container
          *ngFor="
            let jc of _sharedService.jobObj.JCBasicInfoList
              | filter: 21:'CurrentJobStatus'
              | searchJobCard: searchQuery
              | slice
                : (cPage - 1) * _sharedService.pageSize
                : (cPage - 1) * _sharedService.pageSize +
                    _sharedService.pageSize;
            let i = index
          "
        >
          <div class="card inner-card-shadow mb-0">
            <!-- card-header -->
            <div
              class="card-header list-card-header light-bold mb-2 bg-white bb-0"
            >
              <div class="d-flex justify-content-between">
                <span class="card-number">{{ jc.JobCardNumber }} </span>
                <span class="serial-number">{{ jc.SeriesID }} </span>
                <span
                  *ngIf="jc.IsContractVehicles == true"
                  class="contract-number"
                  >Service Contract Customer</span
                >
              </div>
              <div class="row pt-1 mx-0">
                <div class="col-12 pt-2 px-1">
                  <div class="row justify-content-end mx-0 primary-dark-font">
                    <span
                      class="col-6 text-right"
                      *ngIf="
                        (_sharedService.logged_user_role_id == 1 ||
                          _sharedService.logged_user_role_id == 2) &&
                        jc.IsTaxFree == true
                      "
                    >
                      <label class="primary-dark-font">Tax Free Card</label>
                      <i
                        class="px-2 fas fa-image pointer"
                        title="View Document"
                        (click)="openFile(jc.JobCardID)"
                      ></i>

                      <ng-container
                        *ngIf="
                          (_sharedService.logged_user_role_id == 1 ||
                            _sharedService.logged_user_role_id == 2) &&
                          jc.IsTaxFreeApproved == false
                        "
                      >
                        <button
                          class="
                            a-button
                            btn btn-primary btn-round btn-simple
                            font-8
                            px-1
                            py-1
                            my-0
                          "
                          title="Approve"
                          (click)="setTaxFree(true, jc.JobCardID)"
                        >
                          Approve
                        </button>

                        <button
                          class="
                            a-button
                            btn btn-primary btn-round btn-simple
                            font-8
                            px-1
                            py-1
                            my-0
                          "
                          title="Reject"
                          (click)="setNotTaxFree(false, jc.JobCardID)"
                        >
                          Reject
                        </button>
                      </ng-container>
                    </span>

                    <span class="col-6 text-right">
                      <i
                        *ngIf="
                          _sharedService.logged_user_role_id == 1 ||
                          _sharedService.logged_user_role_id == 2 ||
                          _sharedService.logged_user_role_id == 3 ||
                          _sharedService.logged_user_role_id == 4 ||
                          _sharedService.logged_user_role_id == 5 ||
                          (_sharedService.user?.Roles
                            | editAcceptedJob
                              : _sharedService.logged_user_id
                              : _sharedService.jobObj.JobProcess
                              : jc.JobCardID)
                        "
                        class="px-2 fas fa-eye pointer"
                        title="View"
                        [routerLink]="['/', 'job', 'detail']"
                        [queryParams]="{ JobCardID: jc.JobCardID }"
                      ></i>

                      <i
                        *ngIf="
                          _sharedService.logged_user_role_id == 1 ||
                          _sharedService.logged_user_role_id == 2 ||
                          _sharedService.logged_user_role_id == 3 ||
                          _sharedService.logged_user_role_id == 4 ||
                          _sharedService.logged_user_role_id == 5 ||
                          (_sharedService.user?.Roles
                            | editAcceptedJob
                              : _sharedService.logged_user_id
                              : _sharedService.jobObj.JobProcess
                              : jc.JobCardID)
                        "
                        class="px-2 fas fa-search"
                        title="View"
                        [routerLink]="['/', 'part', 'compare-parts']"
                        [queryParams]="{ JobCardID: jc.JobCardID }"
                      ></i>

                      <i
                        *ngIf="
                          _sharedService.logged_user_role_id == 1 ||
                          _sharedService.logged_user_role_id == 2 ||
                          _sharedService.logged_user_role_id == 3 ||
                          _sharedService.logged_user_role_id == 4 ||
                          _sharedService.logged_user_role_id == 5 ||
                          (_sharedService.user?.Roles
                            | editAcceptedJob
                              : _sharedService.logged_user_id
                              : _sharedService.jobObj.JobProcess
                              : jc.JobCardID)
                        "
                        class="px-2 fas fa-edit pointer"
                        title="Edit"
                        [routerLink]="
                          _sharedService.logged_user_role_id == 5 ||
                          _sharedService.logged_user_role_id == 6 ||
                          _sharedService.logged_user_role_id == 8
                            ? [
                                '/',
                                'update-job',
                                jc.JobCardID,
                                'inspection-results'
                              ]
                            : _sharedService.logged_user_role_id == 4
                            ? [
                                '/',
                                'update-job',
                                jc.JobCardID,
                                'basic-info-view'
                              ]
                            : ['/', 'update-job', jc.JobCardID, 'basic-info']
                        "
                      ></i>

                      <i
                        *ngIf="
                          _sharedService.logged_user_role_id == 1 ||
                          _sharedService.logged_user_role_id == 2 ||
                          _sharedService.logged_user_role_id == 3
                        "
                        class="px-2 fas fa-comment-alt pointer"
                        title="Feedback"
                        [routerLink]="['/', 'customer', 'customer-feedback']"
                        [queryParams]="{
                          JobCardID: jc.JobCardID,
                          CustomerID: jc.CustomerID
                        }"
                      ></i>

                      <i
                        *ngIf="
                          _sharedService.logged_user_role_id == 1 ||
                          _sharedService.logged_user_role_id == 2
                        "
                        class="px-2 fas fa-trash-alt pointer pointer"
                        title="Delete"
                        (click)="openModal(warningDelete, jc.JobCardID)"
                      ></i>
                    </span>

                    <!-- <i *ngIf="_sharedService.logged_user_role_id == 5 || _sharedService.logged_user_role_id == 8"
                                    class="fas fa-car pointer m-2 pointer" title="Vehicle Profile"
                                    [routerLink]="['/','vehicle','view']"
                                    [queryParams]="{VehicleID : jc.VehicleID}"></i> -->
                  </div>
                </div>

                <div
                  class="row col-12 primary-dark-font pt-1 pl-lg-4 mx-0 ipad"
                >
                  <div class="col-3 row mx-0">
                    <div class="col-12 bold-font">
                      <i class="fas fa-user mr-2 primary-font" title="Name"></i>
                      <label>{{ jc.CustomerFullName }} </label>
                    </div>

                    <div class="col-12 bold-font">
                      <i
                        class="fas fa-mobile-alt mr-2 primary-font"
                        title="Phone"
                      ></i>
                      <label>{{ jc.ContactPersonMobile }}</label>
                    </div>
                  </div>

                  <div class="col-3 row mx-0">
                    <div
                      class="col-12 align-self-center pointer bold-font px-0"
                      title="Make Model Year"
                    >
                      <a
                        class="primary-dark-font"
                        [routerLink]="['/', 'vehicle', 'view']"
                        [queryParams]="{ VehicleID: jc.VehicleID }"
                      >
                        <i
                          class="fas fa-car mr-2 fa-lg primary-font"
                          title="Make Model Year"
                        ></i>
                        <span class="pointer"
                          >{{ jc.EnglishMakeName }}
                          {{ jc.EnglishModelName }}
                          {{ jc.ProductionYear }}</span
                        >
                      </a>
                    </div>

                    <div class="col-12 align-self-center bold-font px-0">
                      <i
                        class="ts plate-number-icon mr-2"
                        title="Plate Number"
                      ></i>
                      <label>{{ jc.PlateNumber }}</label>
                    </div>
                  </div>

                  <div class="col-3 row mx-0">
                    <div class="col-12" title="Check-in time">
                      <i class="fas fa-angle-right mr-1 primary-font"></i
                      ><i class="fas fa-clock mr-1 primary-font"></i>
                      <label>{{ jc.JobOpenDate | date: "short" }}</label>
                    </div>
                    <div class="col-12" title="Checkout time">
                      <i class="fas fa-angle-left mr-1 primary-font"></i
                      ><i class="fas fa-clock mr-1 primary-font"></i>
                      <label>{{ jc.JobCloseDate | date: "short" }}</label>
                    </div>
                  </div>
                  <!-- foreman supervisor -->
                  <div class="col-3 row mx-0">
                    <div class="col-12">
                      <i class="ts foreman-icon mr-2" title="Foreman"></i>
                      <label *ngIf="jc.ForemanName != undefined">{{
                        jc.ForemanName
                      }}</label>
                      <span
                        *ngIf="
                          jc.ForemanName == undefined || jc.ForemanName == ''
                        "
                      >
                        <label
                          class="primary-font"
                          *ngIf="
                            _sharedService.logged_user_role_id == 1 ||
                            _sharedService.logged_user_role_id == 2 ||
                            _sharedService.logged_user_role_id == 4
                          "
                          >Assign Foreman</label
                        >
                        <label
                          *ngIf="
                            _sharedService.logged_user_role_id != 1 &&
                            _sharedService.logged_user_role_id != 2 &&
                            _sharedService.logged_user_role_id != 4
                          "
                          >-</label
                        >
                      </span>

                      <i
                        class="fas fa-edit mx-2 primary-font"
                        *ngIf="
                          (_sharedService.logged_user_role_id == 1 ||
                            _sharedService.logged_user_role_id == 2 ||
                            _sharedService.logged_user_role_id == 4) &&
                          jc.StatusID != 25 &&
                          (jc.VIStatusID == 17 ||
                            (
                              _sharedService.jobObj.JobParts
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: true:'IsInclude'
                            ).length > 0 ||
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: true:'IsInclude'
                            ).length > 0)
                        "
                        (click)="
                          openAssignTechnician(assignTechModal, jc.JobCardID, 1)
                        "
                      ></i>
                    </div>

                    <div class="col-12">
                      <i class="ts supervisor-icon mr-2" title="Supervisor"></i>
                      <label *ngIf="jc.SupervisorName != undefined">{{
                        jc.SupervisorName
                      }}</label>
                      <span
                        *ngIf="
                          jc.SupervisorName == undefined ||
                          jc.SupervisorName == ''
                        "
                      >
                        <label
                          class="primary-font"
                          *ngIf="
                            _sharedService.logged_user_role_id == 1 ||
                            _sharedService.logged_user_role_id == 2 ||
                            _sharedService.logged_user_role_id == 3
                          "
                          >Assign Supervisor</label
                        >
                        <label
                          *ngIf="
                            _sharedService.logged_user_role_id != 1 &&
                            _sharedService.logged_user_role_id != 2 &&
                            _sharedService.logged_user_role_id != 3
                          "
                          >-</label
                        >
                      </span>

                      <i
                        class="fas fa-edit mx-2 primary-font"
                        *ngIf="
                          (_sharedService.logged_user_role_id == 1 ||
                            _sharedService.logged_user_role_id == 2 ||
                            _sharedService.logged_user_role_id == 3) &&
                          jc.StatusID != 25 &&
                          (jc.VIStatusID == 17 ||
                            (
                              _sharedService.jobObj.JobParts
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: true:'IsInclude'
                            ).length > 0 ||
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: true:'IsInclude'
                            ).length > 0)
                        "
                        (click)="
                          openAssignTechnician(assignTechModal, jc.JobCardID, 2)
                        "
                      ></i>
                    </div>
                  </div>

                  <!-- assign technicians dropdown -->
                  <div
                    class="col-12 row"
                    *ngIf="
                      _sharedService.logged_user_role_id != 3 &&
                      jc.ApprovalStatusID == 17 &&
                      jc.QAStatusID != 17
                    "
                  >
                    <div
                      class="
                        floating-label
                        form-group
                        col-lg-3 col-sm-4
                        mb-0
                        pb-0
                        pt-2
                        text-center
                      "
                    >
                      <span
                        >{{
                          jc.MechanicID == undefined
                            ? "Choose Mechanic"
                            : (_sharedService.jobObj.Employees
                                | filter: jc.MechanicID:"UserID")[0]
                                .EmployeeFullName
                        }}
                        <i
                          class="fas fa-edit mx-2 primary-font"
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 70:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length > 0
                          "
                          (click)="
                            openAssignTechnician(
                              assignTechModal,
                              jc.JobCardID,
                              96
                            )
                          "
                        ></i>
                        <small
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 70:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length == 0
                          "
                          >(No task)</small
                        >
                      </span>
                    </div>

                    <div
                      class="
                        floating-label
                        form-group
                        col-lg-3 col-sm-4
                        mb-0
                        pb-0
                        pt-2
                        text-center
                      "
                    >
                      <span
                        >{{
                          jc.ElectricianID == undefined
                            ? "Choose Electrician"
                            : (_sharedService.jobObj.Employees
                                | filter: jc.ElectricianID:"UserID")[0]
                                .EmployeeFullName
                        }}
                        <i
                          class="fas fa-edit mx-2 primary-font"
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 71:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length > 0
                          "
                          (click)="
                            openAssignTechnician(
                              assignTechModal,
                              jc.JobCardID,
                              95
                            )
                          "
                        ></i>
                        <small
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 71:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length == 0
                          "
                          >(No task)</small
                        >
                      </span>
                    </div>

                    <div
                      class="
                        floating-label
                        form-group
                        col-lg-3 col-sm-4
                        mb-0
                        pb-0
                        pt-2
                        text-center
                      "
                    >
                      <span
                        >{{
                          jc.OtherTechID == undefined
                            ? "Choose Other"
                            : (_sharedService.jobObj.Employees
                                | filter: jc.OtherTechID:"UserID")[0]
                                .EmployeeFullName
                        }}
                        <i
                          class="fas fa-edit mx-2 primary-font"
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 102:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length > 0
                          "
                          (click)="
                            openAssignTechnician(
                              assignTechModal,
                              jc.JobCardID,
                              97
                            )
                          "
                        ></i>
                        <small
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 102:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length == 0
                          "
                          >(No task)</small
                        >
                      </span>
                    </div>

                    <div
                      class="
                        floating-label
                        form-group
                        col-lg-3 col-sm-4
                        mb-0
                        pb-0
                        pt-2
                        text-center
                      "
                    >
                      <span
                        >{{
                          jc.InspectionID == undefined
                            ? "Choose Inspection"
                            : (_sharedService.jobObj.Employees
                                | filter: jc.InspectionID:"UserID")[0]
                                .EmployeeFullName
                        }}
                        <i
                          class="fas fa-edit mx-2 primary-font"
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 139:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length > 0
                          "
                          (click)="
                            openAssignTechnician(
                              assignTechModal,
                              jc.JobCardID,
                              139
                            )
                          "
                        ></i>
                        <small
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 139:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length == 0
                          "
                          >(No task)</small
                        >
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row w-100 mx-0 collapse-margin-top">
              <hr class="divider" />
              <a
                class="collapse-tabset btn p-0"
                data-toggle="collapse"
                href="#card{{ jc.JobCardID }}"
                role="button"
                (click)="collapseJC($event, jc.JobCardID)"
                aria-expanded="false"
                aria-controls="jc.JobCardID"
              >
                <i
                  class="fas fa-chevron-down hover-color px-3 pt-3 pb-2"
                  id="{{ jc.JobCardID }}"
                ></i>
              </a>
            </div>
            <div class="collapse" id="card{{ jc.JobCardID }}">
              <div class="row card-body-font my-0 bb-1 mx-3">
                <div class="col-lg-12 col-sm-12 px-2">
                  <ngb-tabset class="jl-tabset">
                    <ngb-tab title="Concerns">
                      <ng-template ngbTabContent>
                        <div class="p-0 card-scroll card-height">
                          <table class="table table-striped primary-dark-font">
                            <thead>
                              <tr>
                                <th scope="col">ID</th>
                                <th scope="col">Complaint</th>
                                <th scope="col">Type</th>
                                <th scope="col">Cost</th>
                                <th scope="col">Status</th>
                              </tr>
                            </thead>

                            <tbody>
                              <tr
                                class="hovered"
                                *ngFor="
                                  let concern of _sharedService.jobObj
                                    .JobConcerns
                                    | filter: jc.JobCardID:'JobCardID';
                                  let idx = index
                                "
                              >
                                <td>{{ idx + 1 }}</td>
                                <td>{{ concern.ConcernDescription }}</td>
                                <td>{{ concern.ConcernTypeName }}</td>
                                <td>{{ concern.TotalCost }}</td>
                                <td>
                                  <span *ngIf="concern.IsApproved == true"
                                    >Approved</span
                                  >
                                  <span *ngIf="concern.IsApproved != true"
                                    >Not Approved</span
                                  >
                                </td>
                              </tr>
                            </tbody>
                            <tbody
                              *ngIf="
                                _sharedService.jobObj.JobConcerns ==
                                  undefined ||
                                (_sharedService.jobObj.JobConcerns !=
                                  undefined &&
                                  (
                                    _sharedService.jobObj.JobConcerns
                                    | filter: jc.JobCardID:'JobCardID'
                                  ).length == 0)
                              "
                            >
                              <tr scope="row">
                                <td colspan="12" class="text-center">
                                  No Concern Added!
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </ng-template>
                    </ngb-tab>

                    <ngb-tab title="Tasks">
                      <ng-template ngbTabContent>
                        <div class="card main-card no-border list-card">
                          <div class="p-0 card-scroll card-height t-responsive">
                            <table
                              class="table table-striped primary-dark-font"
                            >
                              <thead>
                                <tr>
                                  <th class="th1" scope="col">ID</th>
                                  <th class="th1" scope="col">Name</th>
                                  <th class="th1" scope="col">Type</th>
                                  <th class="th1" scope="col">Category</th>
                                  <th class="th1" scope="col">Start Time</th>
                                  <th class="th1" scope="col">End Time</th>
                                  <!-- <th scope="col"
                                                                *ngIf="_sharedService.logged_user_role_id == 1 || _sharedService.logged_user_role_id == 2 || _sharedService.logged_user_role_id == 3 || _sharedService.logged_user_role_id == 4 || _sharedService.logged_user_role_id == 5">
                                                                Labor</th> -->
                                  <th class="th1" scope="col">AssignedTo</th>
                                  <th class="th1" scope="col">Status</th>
                                </tr>
                              </thead>
                              <!-- <div class="row">
                                                        
                                                    </div> -->
                              <tbody
                                *ngIf="
                                  _sharedService.jobObj.JobTasks == undefined ||
                                  (_sharedService.jobObj.JobTasks !=
                                    undefined &&
                                    (
                                      _sharedService.jobObj.JobTasks
                                      | filter: jc.JobCardID:'JobCardID'
                                      | filter: 51:'JobTaskTypeID'
                                    ).length == 0)
                                "
                              >
                                <tr scope="row">
                                  <td colspan="12" class="text-center">
                                    No Task Added!
                                  </td>
                                </tr>
                              </tbody>
                              <!-- before approval -->
                              <tbody *ngIf="jc.ApprovalStatusID != 17">
                                <tr
                                  class="hovered"
                                  title="Task"
                                  (click)="
                                    openTaskModal(taskModel, jt.JobTaskID)
                                  "
                                  *ngFor="
                                    let jt of _sharedService.jobObj.JobTasks
                                      | filter: jc.JobCardID:'JobCardID'
                                      | filter: 51:'JobTaskTypeID';
                                    let idx = index
                                  "
                                >
                                  <td class="td1">{{ idx + 1 }}</td>
                                  <td class="td1">
                                    <span
                                      appElseHyphen
                                      [elseHyphen]="jt.LaborDescriptionEng"
                                    ></span>
                                  </td>
                                  <td class="td1">{{ jt.JobTaskTypeName }}</td>
                                  <td class="td1">{{ jt.RepairTypeName }}</td>
                                  <td class="td1">
                                    {{ jt.AcceptedDateTime | date: "short" }}
                                  </td>
                                  <td class="td1">
                                    {{ jt.EndDateTime | date: "short" }}
                                  </td>
                                  <!-- <td
                                                                *ngIf="_sharedService.logged_user_role_id == 1 || _sharedService.logged_user_role_id == 2 || _sharedService.logged_user_role_id == 3 || _sharedService.logged_user_role_id == 4 || _sharedService.logged_user_role_id == 5">
                                                                {{jt.LaborPrice}}</td> -->
                                  <td class="td1">
                                    <span
                                      *ngIf="jt.EmployeeFullName != undefined"
                                      >{{ jt.EmployeeFullName }}</span
                                    >
                                    <span
                                      *ngIf="
                                        jt.EmployeeFullName == undefined ||
                                        jt.EmployeeFullName == ''
                                      "
                                      >N/A</span
                                    >
                                  </td>
                                  <td class="td1">
                                    {{
                                      jt.TaskStatusID == 17
                                        ? "Completed"
                                        : jt.TaskStatusID == 16
                                        ? "In Progress"
                                        : "Not Assigned"
                                    }}
                                  </td>
                                </tr>
                              </tbody>
                              <!-- after approval  -->
                              <tbody *ngIf="jc.ApprovalStatusID == 17">
                                <tr
                                  class="hovered"
                                  title="Task"
                                  (click)="
                                    openTaskModal(taskModel, jt.JobTaskID)
                                  "
                                  *ngFor="
                                    let jt of _sharedService.jobObj.JobTasks
                                      | filter: jc.JobCardID:'JobCardID'
                                      | filter: 51:'JobTaskTypeID'
                                      | filter: true:'IsInclude';
                                    let idx = index
                                  "
                                >
                                  <td>{{ idx + 1 }}</td>
                                  <td>
                                    <span
                                      appElseHyphen
                                      [elseHyphen]="jt.LaborDescriptionEng"
                                    ></span>
                                  </td>
                                  <td>{{ jt.JobTaskTypeName }}</td>
                                  <td>{{ jt.RepairTypeName }}</td>
                                  <td>
                                    {{ jt.AcceptedDateTime | date: "short" }}
                                  </td>
                                  <td>{{ jt.EndDateTime | date: "short" }}</td>
                                  <!-- <td
                                                                *ngIf="_sharedService.logged_user_role_id == 1 || _sharedService.logged_user_role_id == 2 || _sharedService.logged_user_role_id == 3 || _sharedService.logged_user_role_id == 4 || _sharedService.logged_user_role_id == 5">
                                                                {{jt.LaborPrice}}</td> -->
                                  <td>
                                    <span
                                      *ngIf="jt.EmployeeFullName != undefined"
                                      >{{ jt.EmployeeFullName }}</span
                                    >
                                    <span
                                      *ngIf="
                                        jt.EmployeeFullName == undefined ||
                                        jt.EmployeeFullName == ''
                                      "
                                      >N/A</span
                                    >
                                  </td>
                                  <td>
                                    {{
                                      jt.TaskStatusID == 17
                                        ? "Completed"
                                        : jt.TaskStatusID == 16
                                        ? "In Progress"
                                        : "Not Assigned"
                                    }}
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </ng-template>
                    </ngb-tab>

                    <ngb-tab title="Parts">
                      <ng-template ngbTabContent>
                        <div class="card main-card no-border list-card">
                          <div class="p-0 card-scroll card-height">
                            <table
                              class="table table-striped primary-dark-font"
                            >
                              <thead>
                                <tr>
                                  <th scope="col">ID</th>
                                  <th scope="col">Part</th>
                                  <th scope="col">Concern</th>
                                  <th scope="col">Status</th>
                                  <th
                                    scope="col"
                                    *ngIf="
                                      _sharedService.logged_user_role_id == 1 ||
                                      _sharedService.logged_user_role_id == 2 ||
                                      _sharedService.logged_user_role_id == 3 ||
                                      _sharedService.logged_user_role_id == 6
                                    "
                                  >
                                    Price
                                  </th>
                                </tr>
                              </thead>

                              <tbody
                                *ngIf="
                                  _sharedService.jobObj.JobParts == undefined ||
                                  (_sharedService.jobObj.JobParts !=
                                    undefined &&
                                    (
                                      _sharedService.jobObj.JobParts
                                      | filter: jc.JobCardID:'JobCardID'
                                    ).length == 0)
                                "
                              >
                                <tr scope="row">
                                  <td colspan="12" class="text-center">
                                    No Part Added!
                                  </td>
                                </tr>
                              </tbody>
                              <tbody>
                                <tr
                                  class="hovered"
                                  *ngFor="
                                    let jp of _sharedService.jobObj.JobParts
                                      | filter: jc.JobCardID:'JobCardID'
                                      | filter
                                        : (jc.ApprovalStatusID == 17
                                            ? true
                                            : '')
                                        : 'IsInclude';
                                    let idx = index
                                  "
                                >
                                  <td>{{ idx + 1 }}</td>
                                  <td>{{ jp.PartNameEnglish }}</td>
                                  <td>{{ jp.ConcernDescription }}</td>
                                  <td>
                                    <span
                                      *ngIf="
                                        _sharedService.logged_user_role_id ==
                                          3 ||
                                        _sharedService.logged_user_role_id == 4
                                      "
                                      >{{
                                        jp.IsInclude == true
                                          ? jp.JobPartStatusName
                                          : "Not Approved"
                                      }}</span
                                    >
                                    <!-- for manager -->
                                    <ng-select
                                      placeholder="Select Status"
                                      *ngIf="
                                        _sharedService.logged_user_role_id ==
                                          1 ||
                                        _sharedService.logged_user_role_id == 2
                                      "
                                      class="custom dropdown-scale"
                                      appendTo="#job-list"
                                      name="partDelivery"
                                      (change)="changePartStatus(jp)"
                                      [(ngModel)]="jp.JobPartStatusName"
                                    >
                                      <ng-option
                                        *ngFor="
                                          let item of _sharedService._commonMeta
                                            .ObjectStatus
                                            | filter
                                              : 'PartDelivery'
                                              : 'ObjectNameEnglish'
                                        "
                                        [value]="item.StatusNameEnglish"
                                      >
                                        {{ item.StatusNameEnglish }}
                                      </ng-option>
                                    </ng-select>
                                  </td>
                                  <td
                                    *ngIf="
                                      _sharedService.logged_user_role_id == 1 ||
                                      _sharedService.logged_user_role_id == 2 ||
                                      _sharedService.logged_user_role_id == 3 ||
                                      _sharedService.logged_user_role_id == 6
                                    "
                                  >
                                    {{ jp.SellingPrice }}
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </ng-template>
                    </ngb-tab>

                    <ngb-tab title="External Tasks">
                      <ng-template ngbTabContent>
                        <div class="card main-card no-border list-card">
                          <div class="p-0 card-scroll card-height">
                            <table
                              class="table table-striped primary-dark-font"
                            >
                              <thead>
                                <tr>
                                  <th scope="col">ID</th>
                                  <th scope="col">Task</th>
                                  <th scope="col">Location</th>
                                </tr>
                              </thead>

                              <tbody
                                *ngIf="
                                  _sharedService.jobObj.JobTasks == undefined ||
                                  (_sharedService.jobObj.JobTasks !=
                                    undefined &&
                                    (
                                      _sharedService.jobObj.JobTasks
                                      | filter: jc.JobCardID:'JobCardID'
                                      | filter: 52:'JobTaskTypeID'
                                    ).length == 0)
                                "
                              >
                                <tr scope="row">
                                  <td colspan="12" class="text-center">
                                    No External Task Added!
                                  </td>
                                </tr>
                              </tbody>

                              <tbody>
                                <tr
                                  class="hovered"
                                  (click)="
                                    openTaskModal(taskModel, jt.JobTaskID)
                                  "
                                  *ngFor="
                                    let jt of _sharedService.jobObj.JobTasks
                                      | filter: jc.JobCardID:'JobCardID'
                                      | filter: 52:'JobTaskTypeID';
                                    let idx = index
                                  "
                                >
                                  <td>{{ idx + 1 }}</td>
                                  <td>
                                    <span
                                      appElseHyphen
                                      [elseHyphen]="jt.LaborDescriptionEng"
                                    ></span>
                                  </td>
                                  <td>{{ jt.Location }}</td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </ng-template>
                    </ngb-tab>
                  </ngb-tabset>
                </div>
              </div>
            </div>
            <!-- card footer -->
            <div class="card-footer text-muted crumbs-footer bt-0">
              <div
                id="crumbs"
                class="col-12 justify-content-center primary-font"
              >
                <ul class="align-self-center">
                  <div class="pn-ProductNav_Wrapper">
                    <nav id="pnProductNavOne" class="pn-ProductNav">
                      <div
                        id="pnProductNavContentsOne"
                        class="pn-ProductNav_Contents mb-1"
                      >
                        <!-- let jt of _sharedService.jobObj.JobTasks  | filter : jc.JobCardID : 'JobCardID' | filter: 51 : 'JobTaskTypeID' -->
                        <ng-container
                          *ngFor="
                            let jp of _sharedService.jobObj.JobProcess
                              | filter: jc.JobCardID:'JobCardID';
                            let id = index
                          "
                        >
                          <li
                            class="pn-ProductNav_LinkOne"
                            aria-selected="true"
                            [ngClass]="{
                              'current-process':
                                jp.ProcessTypeID == jc.ActiveProcess,
                              'completed-process': jp.ProcessStatusID == 17
                            }"
                          >
                            <a class="mb-2">
                              <div
                                class="
                                  floating-label
                                  form-group
                                  col-auto
                                  float-left
                                  d-flex
                                  align-items-center
                                  i-floating-label
                                  w-100
                                  justify-content-center
                                  flex-wrap
                                  pb-0
                                  px-lg-3
                                "
                              >
                                <span class="float-left m-0 mx-lg-1">
                                  <!-- job process names -->
                                  <span class="pointer">
                                    <i class="{{ jp.Icon }} mr-2"></i>
                                    <ng-container
                                      *ngIf="
                                        jp.ProcessStatusID != 17 &&
                                        jp.ProcessTypeID != 11
                                      "
                                    >
                                      <i
                                        class="fas fa-edit mr-1"
                                        [ngClass]="
                                          _sharedService.logged_user_role_id ==
                                            4 && jp.ProcessTypeID == 9
                                            ? 'hover-color'
                                            : 'primary-dark-font'
                                        "
                                        (click)="
                                          openAssignModal(
                                            assignProcessModal,
                                            jp
                                          )
                                        "
                                        *ngIf="
                                          _sharedService.logged_user_role_id ==
                                            1 ||
                                          _sharedService.logged_user_role_id ==
                                            2 ||
                                          (_sharedService.logged_user_role_id ==
                                            3 &&
                                            jp.ProcessTypeID == 8) ||
                                          _sharedService.logged_user_role_id ==
                                            4
                                        "
                                      ></i>
                                    </ng-container>
                                    <small
                                      [ngClass]="
                                        _sharedService.logged_user_role_id ==
                                          4 && jp.ProcessTypeID == 9
                                          ? 'hover-color'
                                          : 'primary-dark-font'
                                      "
                                      class="small-font progress-heading"
                                      >{{ jp.TypeNameEnglish }}</small
                                    >

                                    <i
                                      class="
                                        far
                                        fa-check-circle
                                        ml-1
                                        hover-color
                                      "
                                      *ngIf="jp.ProcessStatusID == 17"
                                    ></i>

                                    <span
                                      *ngIf="
                                        jp.ProcessStatusID != 17 &&
                                        jp.ProcessTypeID != 9
                                      "
                                      class="hover-color"
                                    >
                                      <br />
                                      <span *ngIf="jp.ProcessStatusID == 16"
                                        >Accepted</span
                                      >
                                      <span *ngIf="jp.ProcessStatusID == 15"
                                        >Pending</span
                                      >
                                      <span *ngIf="jp.ProcessStatusID == null"
                                        >Un Assigned</span
                                      >
                                    </span>
                                    <!-- <span
                                                                    class="progress-abbr bold-font">{{jp.ProcessAbbrevation}}</span> -->
                                    <!-- <i class="ts check-mark" title="Job Done"></i> -->
                                  </span>
                                  <!-- dropdown  -->
                                  <!-- <div class="pt-2"
                                                                *ngIf="jp.ShowDropdown == true && jp.ProcessStatusID != 17 && jp.ProcessTypeID != 11">
                                                                <ng-select class="custom-job-dropdown"
                                                                    *ngIf="_sharedService.logged_user_role_id == 1 || _sharedService.logged_user_role_id == 2 || (_sharedService.logged_user_role_id == 3 && jp.ProcessTypeID == 8) || _sharedService.logged_user_role_id == 4"
                                                                    (change)="assignJP(jp)"
                                                                    name="{{jc.JobCardID}}{{id}}"
                                                                    appendTo="#job-list" id="{{jc.JobCardID}}{{id}}"
                                                                    [(ngModel)]="jp.EmployeeID">
                                                                    <ng-container
                                                                        *ngFor="let emp of _sharedService.jobObj.Employees | employeeFilter: jp.ProcessTypeID : 'RoleID' : _sharedService.jobObj.UserRoles">
                                                                        <ng-option [value]="emp.UserID"
                                                                            (click)="jp.ShowDropdown = true">
                                                                            {{emp.EmployeeFullName}}
                                                                        </ng-option>
                                                                    </ng-container>
                                                                </ng-select>
                                                            </div> -->

                                  <!-- technician name  -->
                                  <span
                                    *ngIf="jp.EmployeeID != undefined"
                                    class="smaller-font"
                                    ><br />{{ jp.EmployeeFullName }}
                                    <ng-container *ngIf="jp.ProcessTypeID == 9">
                                      <span *ngIf="jc.IsIRCompleted == 1">
                                        <i
                                          title="Completed"
                                          class="fas fa-check"
                                        ></i>
                                      </span>
                                      <span *ngIf="jc.IsIRCompleted != 1">
                                        <i
                                          title="In Progress"
                                          class="fas fa-hourglass-half"
                                        ></i>
                                      </span>
                                    </ng-container>
                                  </span>

                                  <!-- for IR show tech and high authority progress -->
                                  <span *ngIf="jp.ProcessTypeID == 9">
                                    <br />
                                    High Authority
                                    <span *ngIf="jp.ProcessStatusID == 17"
                                      ><i
                                        title="Completed"
                                        class="fas fa-check"
                                      ></i
                                    ></span>
                                    <span *ngIf="jp.ProcessStatusID != 17"
                                      ><i
                                        title="In Progress"
                                        class="fas fa-hourglass-half"
                                      ></i
                                    ></span>
                                  </span>

                                  <span
                                    *ngIf="jp.ProcessStatusID == 17"
                                    class="smaller-font"
                                    ><br />{{ jp.ActualTimeSpent }}</span
                                  >
                                </span>
                              </div>
                            </a>
                          </li>
                        </ng-container>
                        <span
                          id="pnIndicatorOne"
                          class="pn-ProductNav_Indicator"
                        ></span>
                      </div>
                    </nav>
                    <button
                      id="pnAdvancerLeftOne"
                      class="pn-Advancer pn-Advancer_Left bg-white"
                      type="button"
                    >
                      <i class="fas fa-chevron-left primary-font"></i>
                    </button>
                    <button
                      id="pnAdvancerRightOne"
                      class="pn-Advancer pn-Advancer_Right bg-white"
                      type="button"
                    >
                      <i class="fas fa-chevron-right primary-font"></i>
                    </button>
                  </div>
                </ul>
              </div>
            </div>
            <!-- progress bar -->
            <!-- <div class="row justify-content-center">
                    <div class="col-11 py-2">
                        <span>
                            <ngb-progressbar type=""
                                [value]="jc.QAStatusID ==17? 100 : jc.ApprovalStatusID == 17? 80 : jc.PPStatusID == 17? 60 : jc.IRStatusID == 17 ? 40 : jc.VIStatusID == 17 ? 20 : 0"
                                height=".5rem"></ngb-progressbar>
                        </span>
                    </div>
                </div> -->
          </div>
          <div
            class="row w-100 mx-0"
            *ngIf="
              (
                _sharedService.jobObj.JCBasicInfoList
                | filter: _sharedService.jobCardTab:'CurrentJobStatus'
              ).length > 1 &&
              (
                _sharedService.jobObj.JCBasicInfoList
                | filter: _sharedService.jobCardTab:'CurrentJobStatus'
              ).length != i
            "
          >
            <hr class="w-100 my-2" />
          </div>
        </ng-container>
        <div
          class="row justify-content-center my-3 mb-md-5"
          *ngIf="
            _sharedService.jobObj != undefined &&
            _sharedService.jobObj.JCBasicInfoList != undefined &&
            (
              _sharedService.jobObj.JCBasicInfoList
              | filter: 21:'CurrentJobStatus'
              | searchJobCard: searchQuery
            ).length >= 1
          "
        >
          <ngb-pagination
            *ngIf="_sharedService.jobObj.JCBasicInfo.WorkCount > 10"
            (pageChange)="
              getAllJobCards((filter.TabID = 21), (filter.pageNumber = $event))
            "
            [collectionSize]="_sharedService.jobObj.JCBasicInfo.WorkCount"
            [(page)]="filter.pageNumber"
            aria-label="Default pagination"
            class="pagination-primary mb-md-4"
          >
          </ngb-pagination>
        </div>
      </ng-container>
      <ng-container *ngIf="_sharedService.jobCardTab == 22">
        <ng-container
          *ngFor="
            let jc of _sharedService.jobObj.JCBasicInfoList
              | filter: 22:'CurrentJobStatus'
              | searchJobCard: searchQuery
              | slice
                : (cPage - 1) * _sharedService.pageSize
                : (cPage - 1) * _sharedService.pageSize +
                    _sharedService.pageSize;
            let i = index
          "
        >
          <div class="card inner-card-shadow mb-0">
            <!-- card-header -->
            <div
              class="card-header list-card-header light-bold mb-2 bg-white bb-0"
            >
              <div class="d-flex justify-content-between">
                <span class="card-number">{{ jc.JobCardNumber }} </span>
                <span class="serial-number">{{ jc.SeriesID }} </span>
                <span
                  *ngIf="jc.IsContractVehicles == true"
                  class="contract-number"
                  >Service Contract Customer</span
                >
              </div>
              <div class="row pt-1 mx-0">
                <div class="col-12 pt-2 px-1">
                  <div class="row justify-content-end mx-0 primary-dark-font">
                    <span
                      class="col-6 text-right"
                      *ngIf="
                        (_sharedService.logged_user_role_id == 1 ||
                          _sharedService.logged_user_role_id == 2) &&
                        jc.IsTaxFree == true
                      "
                    >
                      <label class="primary-dark-font">Tax Free Card</label>
                      <i
                        class="px-2 fas fa-image pointer"
                        title="View Document"
                        (click)="openFile(jc.JobCardID)"
                      ></i>

                      <ng-container
                        *ngIf="
                          (_sharedService.logged_user_role_id == 1 ||
                            _sharedService.logged_user_role_id == 2) &&
                          jc.IsTaxFreeApproved == false
                        "
                      >
                        <button
                          class="
                            a-button
                            btn btn-primary btn-round btn-simple
                            font-8
                            px-1
                            py-1
                            my-0
                          "
                          title="Approve"
                          (click)="setTaxFree(true, jc.JobCardID)"
                        >
                          Approve
                        </button>

                        <button
                          class="
                            a-button
                            btn btn-primary btn-round btn-simple
                            font-8
                            px-1
                            py-1
                            my-0
                          "
                          title="Reject"
                          (click)="setNotTaxFree(false, jc.JobCardID)"
                        >
                          Reject
                        </button>
                      </ng-container>
                    </span>

                    <span class="col-6 text-right">
                      <i
                        *ngIf="
                          _sharedService.logged_user_role_id == 1 ||
                          _sharedService.logged_user_role_id == 2 ||
                          _sharedService.logged_user_role_id == 3 ||
                          _sharedService.logged_user_role_id == 4 ||
                          _sharedService.logged_user_role_id == 5 ||
                          (_sharedService.user?.Roles
                            | editAcceptedJob
                              : _sharedService.logged_user_id
                              : _sharedService.jobObj.JobProcess
                              : jc.JobCardID)
                        "
                        class="px-2 fas fa-eye pointer"
                        title="View"
                        [routerLink]="['/', 'job', 'detail']"
                        [queryParams]="{ JobCardID: jc.JobCardID }"
                      ></i>

                      <i
                        *ngIf="
                          _sharedService.logged_user_role_id == 1 ||
                          _sharedService.logged_user_role_id == 2 ||
                          _sharedService.logged_user_role_id == 3 ||
                          _sharedService.logged_user_role_id == 4 ||
                          _sharedService.logged_user_role_id == 5 ||
                          (_sharedService.user?.Roles
                            | editAcceptedJob
                              : _sharedService.logged_user_id
                              : _sharedService.jobObj.JobProcess
                              : jc.JobCardID)
                        "
                        class="px-2 fas fa-search"
                        title="View"
                        [routerLink]="['/', 'part', 'compare-parts']"
                        [queryParams]="{ JobCardID: jc.JobCardID }"
                      ></i>

                      <i
                        *ngIf="
                          _sharedService.logged_user_role_id == 1 ||
                          _sharedService.logged_user_role_id == 2 ||
                          _sharedService.logged_user_role_id == 3 ||
                          _sharedService.logged_user_role_id == 4 ||
                          _sharedService.logged_user_role_id == 5 ||
                          (_sharedService.user?.Roles
                            | editAcceptedJob
                              : _sharedService.logged_user_id
                              : _sharedService.jobObj.JobProcess
                              : jc.JobCardID)
                        "
                        class="px-2 fas fa-edit pointer"
                        title="Edit"
                        [routerLink]="
                          _sharedService.logged_user_role_id == 5 ||
                          _sharedService.logged_user_role_id == 6 ||
                          _sharedService.logged_user_role_id == 8
                            ? [
                                '/',
                                'update-job',
                                jc.JobCardID,
                                'inspection-results'
                              ]
                            : _sharedService.logged_user_role_id == 4
                            ? [
                                '/',
                                'update-job',
                                jc.JobCardID,
                                'basic-info-view'
                              ]
                            : ['/', 'update-job', jc.JobCardID, 'basic-info']
                        "
                      ></i>

                      <i
                        *ngIf="
                          _sharedService.logged_user_role_id == 1 ||
                          _sharedService.logged_user_role_id == 2 ||
                          _sharedService.logged_user_role_id == 3
                        "
                        class="px-2 fas fa-comment-alt pointer"
                        title="Feedback"
                        [routerLink]="['/', 'customer', 'customer-feedback']"
                        [queryParams]="{
                          JobCardID: jc.JobCardID,
                          CustomerID: jc.CustomerID
                        }"
                      ></i>

                      <i
                        *ngIf="
                          _sharedService.logged_user_role_id == 1 ||
                          _sharedService.logged_user_role_id == 2
                        "
                        class="px-2 fas fa-trash-alt pointer pointer"
                        title="Delete"
                        (click)="openModal(warningDelete, jc.JobCardID)"
                      ></i>
                    </span>

                    <!-- <i *ngIf="_sharedService.logged_user_role_id == 5 || _sharedService.logged_user_role_id == 8"
                                    class="fas fa-car pointer m-2 pointer" title="Vehicle Profile"
                                    [routerLink]="['/','vehicle','view']"
                                    [queryParams]="{VehicleID : jc.VehicleID}"></i> -->
                  </div>
                </div>

                <div
                  class="row col-12 primary-dark-font pt-1 pl-lg-4 mx-0 ipad"
                >
                  <div class="col-3 row mx-0">
                    <div class="col-12 bold-font">
                      <i class="fas fa-user mr-2 primary-font" title="Name"></i>
                      <label>{{ jc.CustomerFullName }} </label>
                    </div>

                    <div class="col-12 bold-font">
                      <i
                        class="fas fa-mobile-alt mr-2 primary-font"
                        title="Phone"
                      ></i>
                      <label>{{ jc.ContactPersonMobile }}</label>
                    </div>
                  </div>

                  <div class="col-3 row mx-0">
                    <div
                      class="col-12 align-self-center pointer bold-font px-0"
                      title="Make Model Year"
                    >
                      <a
                        class="primary-dark-font"
                        [routerLink]="['/', 'vehicle', 'view']"
                        [queryParams]="{ VehicleID: jc.VehicleID }"
                      >
                        <i
                          class="fas fa-car mr-2 fa-lg primary-font"
                          title="Make Model Year"
                        ></i>
                        <span class="pointer"
                          >{{ jc.EnglishMakeName }}
                          {{ jc.EnglishModelName }}
                          {{ jc.ProductionYear }}</span
                        >
                      </a>
                    </div>

                    <div class="col-12 align-self-center bold-font px-0">
                      <i
                        class="ts plate-number-icon mr-2"
                        title="Plate Number"
                      ></i>
                      <label>{{ jc.PlateNumber }}</label>
                    </div>
                  </div>

                  <div class="col-3 row mx-0">
                    <div class="col-12" title="Check-in time">
                      <i class="fas fa-angle-right mr-1 primary-font"></i
                      ><i class="fas fa-clock mr-1 primary-font"></i>
                      <label>{{ jc.JobOpenDate | date: "short" }}</label>
                    </div>
                    <div class="col-12" title="Checkout time">
                      <i class="fas fa-angle-left mr-1 primary-font"></i
                      ><i class="fas fa-clock mr-1 primary-font"></i>
                      <label>{{ jc.JobCloseDate | date: "short" }}</label>
                    </div>
                  </div>
                  <!-- foreman supervisor -->
                  <div class="col-3 row mx-0">
                    <div class="col-12">
                      <i class="ts foreman-icon mr-2" title="Foreman"></i>
                      <label *ngIf="jc.ForemanName != undefined">{{
                        jc.ForemanName
                      }}</label>
                      <span
                        *ngIf="
                          jc.ForemanName == undefined || jc.ForemanName == ''
                        "
                      >
                        <label
                          class="primary-font"
                          *ngIf="
                            _sharedService.logged_user_role_id == 1 ||
                            _sharedService.logged_user_role_id == 2 ||
                            _sharedService.logged_user_role_id == 4
                          "
                          >Assign Foreman</label
                        >
                        <label
                          *ngIf="
                            _sharedService.logged_user_role_id != 1 &&
                            _sharedService.logged_user_role_id != 2 &&
                            _sharedService.logged_user_role_id != 4
                          "
                          >-</label
                        >
                      </span>

                      <i
                        class="fas fa-edit mx-2 primary-font"
                        *ngIf="
                          (_sharedService.logged_user_role_id == 1 ||
                            _sharedService.logged_user_role_id == 2 ||
                            _sharedService.logged_user_role_id == 4) &&
                          jc.StatusID != 25 &&
                          (jc.VIStatusID == 17 ||
                            (
                              _sharedService.jobObj.JobParts
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: true:'IsInclude'
                            ).length > 0 ||
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: true:'IsInclude'
                            ).length > 0)
                        "
                        (click)="
                          openAssignTechnician(assignTechModal, jc.JobCardID, 1)
                        "
                      ></i>
                    </div>

                    <div class="col-12">
                      <i class="ts supervisor-icon mr-2" title="Supervisor"></i>
                      <label *ngIf="jc.SupervisorName != undefined">{{
                        jc.SupervisorName
                      }}</label>
                      <span
                        *ngIf="
                          jc.SupervisorName == undefined ||
                          jc.SupervisorName == ''
                        "
                      >
                        <label
                          class="primary-font"
                          *ngIf="
                            _sharedService.logged_user_role_id == 1 ||
                            _sharedService.logged_user_role_id == 2 ||
                            _sharedService.logged_user_role_id == 3
                          "
                          >Assign Supervisor</label
                        >
                        <label
                          *ngIf="
                            _sharedService.logged_user_role_id != 1 &&
                            _sharedService.logged_user_role_id != 2 &&
                            _sharedService.logged_user_role_id != 3
                          "
                          >-</label
                        >
                      </span>

                      <i
                        class="fas fa-edit mx-2 primary-font"
                        *ngIf="
                          (_sharedService.logged_user_role_id == 1 ||
                            _sharedService.logged_user_role_id == 2 ||
                            _sharedService.logged_user_role_id == 3) &&
                          jc.StatusID != 25 &&
                          (jc.VIStatusID == 17 ||
                            (
                              _sharedService.jobObj.JobParts
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: true:'IsInclude'
                            ).length > 0 ||
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: true:'IsInclude'
                            ).length > 0)
                        "
                        (click)="
                          openAssignTechnician(assignTechModal, jc.JobCardID, 2)
                        "
                      ></i>
                    </div>
                  </div>

                  <!-- assign technicians dropdown -->
                  <div
                    class="col-12 row"
                    *ngIf="
                      _sharedService.logged_user_role_id != 3 &&
                      jc.ApprovalStatusID == 17 &&
                      jc.QAStatusID != 17
                    "
                  >
                    <div
                      class="
                        floating-label
                        form-group
                        col-lg-3 col-sm-4
                        mb-0
                        pb-0
                        pt-2
                        text-center
                      "
                    >
                      <span
                        >{{
                          jc.MechanicID == undefined
                            ? "Choose Mechanic"
                            : (_sharedService.jobObj.Employees
                                | filter: jc.MechanicID:"UserID")[0]
                                .EmployeeFullName
                        }}
                        <i
                          class="fas fa-edit mx-2 primary-font"
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 70:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length > 0
                          "
                          (click)="
                            openAssignTechnician(
                              assignTechModal,
                              jc.JobCardID,
                              96
                            )
                          "
                        ></i>
                        <small
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 70:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length == 0
                          "
                          >(No task)</small
                        >
                      </span>
                    </div>

                    <div
                      class="
                        floating-label
                        form-group
                        col-lg-3 col-sm-4
                        mb-0
                        pb-0
                        pt-2
                        text-center
                      "
                    >
                      <span
                        >{{
                          jc.ElectricianID == undefined
                            ? "Choose Electrician"
                            : (_sharedService.jobObj.Employees
                                | filter: jc.ElectricianID:"UserID")[0]
                                .EmployeeFullName
                        }}
                        <i
                          class="fas fa-edit mx-2 primary-font"
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 71:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length > 0
                          "
                          (click)="
                            openAssignTechnician(
                              assignTechModal,
                              jc.JobCardID,
                              95
                            )
                          "
                        ></i>
                        <small
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 71:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length == 0
                          "
                          >(No task)</small
                        >
                      </span>
                    </div>

                    <div
                      class="
                        floating-label
                        form-group
                        col-lg-3 col-sm-4
                        mb-0
                        pb-0
                        pt-2
                        text-center
                      "
                    >
                      <span
                        >{{
                          jc.OtherTechID == undefined
                            ? "Choose Other"
                            : (_sharedService.jobObj.Employees
                                | filter: jc.OtherTechID:"UserID")[0]
                                .EmployeeFullName
                        }}
                        <i
                          class="fas fa-edit mx-2 primary-font"
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 102:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length > 0
                          "
                          (click)="
                            openAssignTechnician(
                              assignTechModal,
                              jc.JobCardID,
                              97
                            )
                          "
                        ></i>
                        <small
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 102:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length == 0
                          "
                          >(No task)</small
                        >
                      </span>
                    </div>

                    <div
                      class="
                        floating-label
                        form-group
                        col-lg-3 col-sm-4
                        mb-0
                        pb-0
                        pt-2
                        text-center
                      "
                    >
                      <span
                        >{{
                          jc.InspectionID == undefined
                            ? "Choose Inspection"
                            : (_sharedService.jobObj.Employees
                                | filter: jc.InspectionID:"UserID")[0]
                                .EmployeeFullName
                        }}
                        <i
                          class="fas fa-edit mx-2 primary-font"
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 139:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length > 0
                          "
                          (click)="
                            openAssignTechnician(
                              assignTechModal,
                              jc.JobCardID,
                              139
                            )
                          "
                        ></i>
                        <small
                          *ngIf="
                            jc.ApprovalStatusID == 17 &&
                            (
                              _sharedService.jobObj.JobTasks
                              | filter: jc.JobCardID:'JobCardID'
                              | filter: 51:'JobTaskTypeID'
                              | filter: 139:'RepairTypeID'
                              | filter: true:'IsInclude'
                            ).length == 0
                          "
                          >(No task)</small
                        >
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row w-100 mx-0 collapse-margin-top">
              <hr class="divider" />
              <a
                class="collapse-tabset btn p-0"
                data-toggle="collapse"
                href="#card{{ jc.JobCardID }}"
                role="button"
                (click)="collapseJC($event, jc.JobCardID)"
                aria-expanded="false"
                aria-controls="jc.JobCardID"
              >
                <i
                  class="fas fa-chevron-down hover-color px-3 pt-3 pb-2"
                  id="{{ jc.JobCardID }}"
                ></i>
              </a>
            </div>
            <div class="collapse" id="card{{ jc.JobCardID }}">
              <div class="row card-body-font my-0 bb-1 mx-3">
                <div class="col-lg-12 col-sm-12 px-2">
                  <ngb-tabset class="jl-tabset">
                    <ngb-tab title="Concerns">
                      <ng-template ngbTabContent>
                        <div class="p-0 card-scroll card-height">
                          <table class="table table-striped primary-dark-font">
                            <thead>
                              <tr>
                                <th scope="col">ID</th>
                                <th scope="col">Complaint</th>
                                <th scope="col">Type</th>
                                <th scope="col">Cost</th>
                                <th scope="col">Status</th>
                              </tr>
                            </thead>

                            <tbody>
                              <tr
                                class="hovered"
                                *ngFor="
                                  let concern of _sharedService.jobObj
                                    .JobConcerns
                                    | filter: jc.JobCardID:'JobCardID';
                                  let idx = index
                                "
                              >
                                <td>{{ idx + 1 }}</td>
                                <td>{{ concern.ConcernDescription }}</td>
                                <td>{{ concern.ConcernTypeName }}</td>
                                <td>{{ concern.TotalCost }}</td>
                                <td>
                                  <span *ngIf="concern.IsApproved == true"
                                    >Approved</span
                                  >
                                  <span *ngIf="concern.IsApproved != true"
                                    >Not Approved</span
                                  >
                                </td>
                              </tr>
                            </tbody>
                            <tbody
                              *ngIf="
                                _sharedService.jobObj.JobConcerns ==
                                  undefined ||
                                (_sharedService.jobObj.JobConcerns !=
                                  undefined &&
                                  (
                                    _sharedService.jobObj.JobConcerns
                                    | filter: jc.JobCardID:'JobCardID'
                                  ).length == 0)
                              "
                            >
                              <tr scope="row">
                                <td colspan="12" class="text-center">
                                  No Concern Added!
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </ng-template>
                    </ngb-tab>

                    <ngb-tab title="Tasks">
                      <ng-template ngbTabContent>
                        <div class="card main-card no-border list-card">
                          <div class="p-0 card-scroll card-height t-responsive">
                            <table
                              class="table table-striped primary-dark-font"
                            >
                              <thead>
                                <tr>
                                  <th class="th1" scope="col">ID</th>
                                  <th class="th1" scope="col">Name</th>
                                  <th class="th1" scope="col">Type</th>
                                  <th class="th1" scope="col">Category</th>
                                  <th class="th1" scope="col">Start Time</th>
                                  <th class="th1" scope="col">End Time</th>
                                  <!-- <th scope="col"
                                                                *ngIf="_sharedService.logged_user_role_id == 1 || _sharedService.logged_user_role_id == 2 || _sharedService.logged_user_role_id == 3 || _sharedService.logged_user_role_id == 4 || _sharedService.logged_user_role_id == 5">
                                                                Labor</th> -->
                                  <th class="th1" scope="col">AssignedTo</th>
                                  <th class="th1" scope="col">Status</th>
                                </tr>
                              </thead>
                              <!-- <div class="row">
                                                        
                                                    </div> -->
                              <tbody
                                *ngIf="
                                  _sharedService.jobObj.JobTasks == undefined ||
                                  (_sharedService.jobObj.JobTasks !=
                                    undefined &&
                                    (
                                      _sharedService.jobObj.JobTasks
                                      | filter: jc.JobCardID:'JobCardID'
                                      | filter: 51:'JobTaskTypeID'
                                    ).length == 0)
                                "
                              >
                                <tr scope="row">
                                  <td colspan="12" class="text-center">
                                    No Task Added!
                                  </td>
                                </tr>
                              </tbody>
                              <!-- before approval -->
                              <tbody *ngIf="jc.ApprovalStatusID != 17">
                                <tr
                                  class="hovered"
                                  title="Task"
                                  (click)="
                                    openTaskModal(taskModel, jt.JobTaskID)
                                  "
                                  *ngFor="
                                    let jt of _sharedService.jobObj.JobTasks
                                      | filter: jc.JobCardID:'JobCardID'
                                      | filter: 51:'JobTaskTypeID';
                                    let idx = index
                                  "
                                >
                                  <td class="td1">{{ idx + 1 }}</td>
                                  <td class="td1">
                                    <span
                                      appElseHyphen
                                      [elseHyphen]="jt.LaborDescriptionEng"
                                    ></span>
                                  </td>
                                  <td class="td1">{{ jt.JobTaskTypeName }}</td>
                                  <td class="td1">{{ jt.RepairTypeName }}</td>
                                  <td class="td1">
                                    {{ jt.AcceptedDateTime | date: "short" }}
                                  </td>
                                  <td class="td1">
                                    {{ jt.EndDateTime | date: "short" }}
                                  </td>
                                  <!-- <td
                                                                *ngIf="_sharedService.logged_user_role_id == 1 || _sharedService.logged_user_role_id == 2 || _sharedService.logged_user_role_id == 3 || _sharedService.logged_user_role_id == 4 || _sharedService.logged_user_role_id == 5">
                                                                {{jt.LaborPrice}}</td> -->
                                  <td class="td1">
                                    <span
                                      *ngIf="jt.EmployeeFullName != undefined"
                                      >{{ jt.EmployeeFullName }}</span
                                    >
                                    <span
                                      *ngIf="
                                        jt.EmployeeFullName == undefined ||
                                        jt.EmployeeFullName == ''
                                      "
                                      >N/A</span
                                    >
                                  </td>
                                  <td class="td1">
                                    {{
                                      jt.TaskStatusID == 17
                                        ? "Completed"
                                        : jt.TaskStatusID == 16
                                        ? "In Progress"
                                        : "Not Assigned"
                                    }}
                                  </td>
                                </tr>
                              </tbody>
                              <!-- after approval  -->
                              <tbody *ngIf="jc.ApprovalStatusID == 17">
                                <tr
                                  class="hovered"
                                  title="Task"
                                  (click)="
                                    openTaskModal(taskModel, jt.JobTaskID)
                                  "
                                  *ngFor="
                                    let jt of _sharedService.jobObj.JobTasks
                                      | filter: jc.JobCardID:'JobCardID'
                                      | filter: 51:'JobTaskTypeID'
                                      | filter: true:'IsInclude';
                                    let idx = index
                                  "
                                >
                                  <td>{{ idx + 1 }}</td>
                                  <td>
                                    <span
                                      appElseHyphen
                                      [elseHyphen]="jt.LaborDescriptionEng"
                                    ></span>
                                  </td>
                                  <td>{{ jt.JobTaskTypeName }}</td>
                                  <td>{{ jt.RepairTypeName }}</td>
                                  <td>
                                    {{ jt.AcceptedDateTime | date: "short" }}
                                  </td>
                                  <td>{{ jt.EndDateTime | date: "short" }}</td>
                                  <!-- <td
                                                                *ngIf="_sharedService.logged_user_role_id == 1 || _sharedService.logged_user_role_id == 2 || _sharedService.logged_user_role_id == 3 || _sharedService.logged_user_role_id == 4 || _sharedService.logged_user_role_id == 5">
                                                                {{jt.LaborPrice}}</td> -->
                                  <td>
                                    <span
                                      *ngIf="jt.EmployeeFullName != undefined"
                                      >{{ jt.EmployeeFullName }}</span
                                    >
                                    <span
                                      *ngIf="
                                        jt.EmployeeFullName == undefined ||
                                        jt.EmployeeFullName == ''
                                      "
                                      >N/A</span
                                    >
                                  </td>
                                  <td>
                                    {{
                                      jt.TaskStatusID == 17
                                        ? "Completed"
                                        : jt.TaskStatusID == 16
                                        ? "In Progress"
                                        : "Not Assigned"
                                    }}
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </ng-template>
                    </ngb-tab>

                    <ngb-tab title="Parts">
                      <ng-template ngbTabContent>
                        <div class="card main-card no-border list-card">
                          <div class="p-0 card-scroll card-height">
                            <table
                              class="table table-striped primary-dark-font"
                            >
                              <thead>
                                <tr>
                                  <th scope="col">ID</th>
                                  <th scope="col">Part</th>
                                  <th scope="col">Concern</th>
                                  <th scope="col">Status</th>
                                  <th
                                    scope="col"
                                    *ngIf="
                                      _sharedService.logged_user_role_id == 1 ||
                                      _sharedService.logged_user_role_id == 2 ||
                                      _sharedService.logged_user_role_id == 3 ||
                                      _sharedService.logged_user_role_id == 6
                                    "
                                  >
                                    Price
                                  </th>
                                </tr>
                              </thead>

                              <tbody
                                *ngIf="
                                  _sharedService.jobObj.JobParts == undefined ||
                                  (_sharedService.jobObj.JobParts !=
                                    undefined &&
                                    (
                                      _sharedService.jobObj.JobParts
                                      | filter: jc.JobCardID:'JobCardID'
                                    ).length == 0)
                                "
                              >
                                <tr scope="row">
                                  <td colspan="12" class="text-center">
                                    No Part Added!
                                  </td>
                                </tr>
                              </tbody>
                              <tbody>
                                <tr
                                  class="hovered"
                                  *ngFor="
                                    let jp of _sharedService.jobObj.JobParts
                                      | filter: jc.JobCardID:'JobCardID'
                                      | filter
                                        : (jc.ApprovalStatusID == 17
                                            ? true
                                            : '')
                                        : 'IsInclude';
                                    let idx = index
                                  "
                                >
                                  <td>{{ idx + 1 }}</td>
                                  <td>{{ jp.PartNameEnglish }}</td>
                                  <td>{{ jp.ConcernDescription }}</td>
                                  <td>
                                    <span
                                      *ngIf="
                                        _sharedService.logged_user_role_id ==
                                          3 ||
                                        _sharedService.logged_user_role_id == 4
                                      "
                                      >{{
                                        jp.IsInclude == true
                                          ? jp.JobPartStatusName
                                          : "Not Approved"
                                      }}</span
                                    >
                                    <!-- for manager -->
                                    <ng-select
                                      placeholder="Select Status"
                                      *ngIf="
                                        _sharedService.logged_user_role_id ==
                                          1 ||
                                        _sharedService.logged_user_role_id == 2
                                      "
                                      class="custom dropdown-scale"
                                      appendTo="#job-list"
                                      name="partDelivery"
                                      (change)="changePartStatus(jp)"
                                      [(ngModel)]="jp.JobPartStatusName"
                                    >
                                      <ng-option
                                        *ngFor="
                                          let item of _sharedService._commonMeta
                                            .ObjectStatus
                                            | filter
                                              : 'PartDelivery'
                                              : 'ObjectNameEnglish'
                                        "
                                        [value]="item.StatusNameEnglish"
                                      >
                                        {{ item.StatusNameEnglish }}
                                      </ng-option>
                                    </ng-select>
                                  </td>
                                  <td
                                    *ngIf="
                                      _sharedService.logged_user_role_id == 1 ||
                                      _sharedService.logged_user_role_id == 2 ||
                                      _sharedService.logged_user_role_id == 3 ||
                                      _sharedService.logged_user_role_id == 6
                                    "
                                  >
                                    {{ jp.SellingPrice }}
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </ng-template>
                    </ngb-tab>

                    <ngb-tab title="External Tasks">
                      <ng-template ngbTabContent>
                        <div class="card main-card no-border list-card">
                          <div class="p-0 card-scroll card-height">
                            <table
                              class="table table-striped primary-dark-font"
                            >
                              <thead>
                                <tr>
                                  <th scope="col">ID</th>
                                  <th scope="col">Task</th>
                                  <th scope="col">Location</th>
                                </tr>
                              </thead>

                              <tbody
                                *ngIf="
                                  _sharedService.jobObj.JobTasks == undefined ||
                                  (_sharedService.jobObj.JobTasks !=
                                    undefined &&
                                    (
                                      _sharedService.jobObj.JobTasks
                                      | filter: jc.JobCardID:'JobCardID'
                                      | filter: 52:'JobTaskTypeID'
                                    ).length == 0)
                                "
                              >
                                <tr scope="row">
                                  <td colspan="12" class="text-center">
                                    No External Task Added!
                                  </td>
                                </tr>
                              </tbody>

                              <tbody>
                                <tr
                                  class="hovered"
                                  (click)="
                                    openTaskModal(taskModel, jt.JobTaskID)
                                  "
                                  *ngFor="
                                    let jt of _sharedService.jobObj.JobTasks
                                      | filter: jc.JobCardID:'JobCardID'
                                      | filter: 52:'JobTaskTypeID';
                                    let idx = index
                                  "
                                >
                                  <td>{{ idx + 1 }}</td>
                                  <td>
                                    <span
                                      appElseHyphen
                                      [elseHyphen]="jt.LaborDescriptionEng"
                                    ></span>
                                  </td>
                                  <td>{{ jt.Location }}</td>
                                </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </ng-template>
                    </ngb-tab>
                  </ngb-tabset>
                </div>
              </div>
            </div>
            <!-- card footer -->
            <div class="card-footer text-muted crumbs-footer bt-0">
              <div
                id="crumbs"
                class="col-12 justify-content-center primary-font"
              >
                <ul class="align-self-center">
                  <div class="pn-ProductNav_Wrapper">
                    <nav id="pnProductNavOne" class="pn-ProductNav">
                      <div
                        id="pnProductNavContentsOne"
                        class="pn-ProductNav_Contents mb-1"
                      >
                        <!-- let jt of _sharedService.jobObj.JobTasks  | filter : jc.JobCardID : 'JobCardID' | filter: 51 : 'JobTaskTypeID' -->
                        <ng-container
                          *ngFor="
                            let jp of _sharedService.jobObj.JobProcess
                              | filter: jc.JobCardID:'JobCardID';
                            let id = index
                          "
                        >
                          <li
                            class="pn-ProductNav_LinkOne"
                            aria-selected="true"
                            [ngClass]="{
                              'current-process':
                                jp.ProcessTypeID == jc.ActiveProcess,
                              'completed-process': jp.ProcessStatusID == 17
                            }"
                          >
                            <a class="mb-2">
                              <div
                                class="
                                  floating-label
                                  form-group
                                  col-auto
                                  float-left
                                  d-flex
                                  align-items-center
                                  i-floating-label
                                  w-100
                                  justify-content-center
                                  flex-wrap
                                  pb-0
                                  px-lg-3
                                "
                              >
                                <span class="float-left m-0 mx-lg-1">
                                  <!-- job process names -->
                                  <span class="pointer">
                                    <i class="{{ jp.Icon }} mr-2"></i>
                                    <ng-container
                                      *ngIf="
                                        jp.ProcessStatusID != 17 &&
                                        jp.ProcessTypeID != 11
                                      "
                                    >
                                      <i
                                        class="fas fa-edit mr-1"
                                        [ngClass]="
                                          _sharedService.logged_user_role_id ==
                                            4 && jp.ProcessTypeID == 9
                                            ? 'hover-color'
                                            : 'primary-dark-font'
                                        "
                                        (click)="
                                          openAssignModal(
                                            assignProcessModal,
                                            jp
                                          )
                                        "
                                        *ngIf="
                                          _sharedService.logged_user_role_id ==
                                            1 ||
                                          _sharedService.logged_user_role_id ==
                                            2 ||
                                          (_sharedService.logged_user_role_id ==
                                            3 &&
                                            jp.ProcessTypeID == 8) ||
                                          _sharedService.logged_user_role_id ==
                                            4
                                        "
                                      ></i>
                                    </ng-container>
                                    <small
                                      [ngClass]="
                                        _sharedService.logged_user_role_id ==
                                          4 && jp.ProcessTypeID == 9
                                          ? 'hover-color'
                                          : 'primary-dark-font'
                                      "
                                      class="small-font progress-heading"
                                      >{{ jp.TypeNameEnglish }}</small
                                    >

                                    <i
                                      class="
                                        far
                                        fa-check-circle
                                        ml-1
                                        hover-color
                                      "
                                      *ngIf="jp.ProcessStatusID == 17"
                                    ></i>

                                    <span
                                      *ngIf="
                                        jp.ProcessStatusID != 17 &&
                                        jp.ProcessTypeID != 9
                                      "
                                      class="hover-color"
                                    >
                                      <br />
                                      <span *ngIf="jp.ProcessStatusID == 16"
                                        >Accepted</span
                                      >
                                      <span *ngIf="jp.ProcessStatusID == 15"
                                        >Pending</span
                                      >
                                      <span *ngIf="jp.ProcessStatusID == null"
                                        >Un Assigned</span
                                      >
                                    </span>
                                    <!-- <span
                                                                    class="progress-abbr bold-font">{{jp.ProcessAbbrevation}}</span> -->
                                    <!-- <i class="ts check-mark" title="Job Done"></i> -->
                                  </span>
                                  <!-- dropdown  -->
                                  <!-- <div class="pt-2"
                                                                *ngIf="jp.ShowDropdown == true && jp.ProcessStatusID != 17 && jp.ProcessTypeID != 11">
                                                                <ng-select class="custom-job-dropdown"
                                                                    *ngIf="_sharedService.logged_user_role_id == 1 || _sharedService.logged_user_role_id == 2 || (_sharedService.logged_user_role_id == 3 && jp.ProcessTypeID == 8) || _sharedService.logged_user_role_id == 4"
                                                                    (change)="assignJP(jp)"
                                                                    name="{{jc.JobCardID}}{{id}}"
                                                                    appendTo="#job-list" id="{{jc.JobCardID}}{{id}}"
                                                                    [(ngModel)]="jp.EmployeeID">
                                                                    <ng-container
                                                                        *ngFor="let emp of _sharedService.jobObj.Employees | employeeFilter: jp.ProcessTypeID : 'RoleID' : _sharedService.jobObj.UserRoles">
                                                                        <ng-option [value]="emp.UserID"
                                                                            (click)="jp.ShowDropdown = true">
                                                                            {{emp.EmployeeFullName}}
                                                                        </ng-option>
                                                                    </ng-container>
                                                                </ng-select>
                                                            </div> -->

                                  <!-- technician name  -->
                                  <span
                                    *ngIf="jp.EmployeeID != undefined"
                                    class="smaller-font"
                                    ><br />{{ jp.EmployeeFullName }}
                                    <ng-container *ngIf="jp.ProcessTypeID == 9">
                                      <span *ngIf="jc.IsIRCompleted == 1">
                                        <i
                                          title="Completed"
                                          class="fas fa-check"
                                        ></i>
                                      </span>
                                      <span *ngIf="jc.IsIRCompleted != 1">
                                        <i
                                          title="In Progress"
                                          class="fas fa-hourglass-half"
                                        ></i>
                                      </span>
                                    </ng-container>
                                  </span>

                                  <!-- for IR show tech and high authority progress -->
                                  <span *ngIf="jp.ProcessTypeID == 9">
                                    <br />
                                    High Authority
                                    <span *ngIf="jp.ProcessStatusID == 17"
                                      ><i
                                        title="Completed"
                                        class="fas fa-check"
                                      ></i
                                    ></span>
                                    <span *ngIf="jp.ProcessStatusID != 17"
                                      ><i
                                        title="In Progress"
                                        class="fas fa-hourglass-half"
                                      ></i
                                    ></span>
                                  </span>

                                  <span
                                    *ngIf="jp.ProcessStatusID == 17"
                                    class="smaller-font"
                                    ><br />{{ jp.ActualTimeSpent }}</span
                                  >
                                </span>
                              </div>
                            </a>
                          </li>
                        </ng-container>
                        <span
                          id="pnIndicatorOne"
                          class="pn-ProductNav_Indicator"
                        ></span>
                      </div>
                    </nav>
                    <button
                      id="pnAdvancerLeftOne"
                      class="pn-Advancer pn-Advancer_Left bg-white"
                      type="button"
                    >
                      <i class="fas fa-chevron-left primary-font"></i>
                    </button>
                    <button
                      id="pnAdvancerRightOne"
                      class="pn-Advancer pn-Advancer_Right bg-white"
                      type="button"
                    >
                      <i class="fas fa-chevron-right primary-font"></i>
                    </button>
                  </div>
                </ul>
              </div>
            </div>
            <!-- progress bar -->
            <!-- <div class="row justify-content-center">
                    <div class="col-11 py-2">
                        <span>
                            <ngb-progressbar type=""
                                [value]="jc.QAStatusID ==17? 100 : jc.ApprovalStatusID == 17? 80 : jc.PPStatusID == 17? 60 : jc.IRStatusID == 17 ? 40 : jc.VIStatusID == 17 ? 20 : 0"
                                height=".5rem"></ngb-progressbar>
                        </span>
                    </div>
                </div> -->
          </div>
          <div
            class="row w-100 mx-0"
            *ngIf="
              (
                _sharedService.jobObj.JCBasicInfoList
                | filter: _sharedService.jobCardTab:'CurrentJobStatus'
              ).length > 1 &&
              (
                _sharedService.jobObj.JCBasicInfoList
                | filter: _sharedService.jobCardTab:'CurrentJobStatus'
              ).length != i
            "
          >
            <hr class="w-100 my-2" />
          </div>
        </ng-container>
        <div
          class="row justify-content-center my-3 mb-md-5"
          *ngIf="
            _sharedService.jobObj != undefined &&
            _sharedService.jobObj.JCBasicInfoList != undefined &&
            (
              _sharedService.jobObj.JCBasicInfoList
              | filter: 22:'CurrentJobStatus'
              | searchJobCard: searchQuery
            ).length >= 1
          "
        >
          <ngb-pagination
            *ngIf="_sharedService.jobObj.JCBasicInfo.CompletedCount > 10"
            (pageChange)="
              getAllJobCards((filter.TabID = 22), (filter.pageNumber = $event))
            "
            [collectionSize]="_sharedService.jobObj.JCBasicInfo.CompletedCount"
            [(page)]="filter.pageNumber"
            aria-label="Default pagination"
            class="pagination-primary mb-md-4"
          >
          </ngb-pagination>
        </div>
      </ng-container>
    </div>

    <!-- queue list  -->
    <div class="pt-3" *ngIf="_sharedService.jobCardTab == 5">
      <div
        *ngIf="
          _sharedService.jobObj == undefined ||
          _sharedService.jobObj.Appointments == undefined ||
          _sharedService.jobObj.Appointments.length == 0
        "
      >
        <h5 class="no-record-error">No data found</h5>
      </div>
      <ng-container
        *ngFor="let ap of _sharedService.jobObj.Appointments; let i = index"
      >
        <div class="card inner-card-shadow mb-3">
          <!-- card-header -->
          <div class="card-header list-card-header light-bold bg-white">
            <span class="card-number">{{ ap.PlateNumber }}</span>
            <div class="row primary-font px-3 pt-2">
              <div class="col-12 row mx-0">
                <div
                  class="col-lg-2 col-md-2 px-md-0 align-self-center"
                  title="Make Model Year"
                >
                  <div class="row mx-0">
                    <div class="col-lg-12 col-md-12 order-md-1">
                      <a>
                        <i class="fas fa-car mr-lg-3 fa-lg" title="Mileage"></i>
                        <label class="pointer"
                          >{{ ap.Mileage }}
                          {{ ap.MileageUnitName }}
                        </label>
                      </a>
                    </div>
                    <div
                      class="col-lg-12 col-md-12 order-md-2 px-md-0 px-lg-3"
                      title="Appointment Time"
                    >
                      <i class="fas fa-angle-right mr-lg-1 primary-font"></i>
                      <i class="fas fa-clock mr-lg-2 primary-font"></i>
                      <label class="cardcreateDate">{{
                        ap.CreatedOn | date: "short"
                      }}</label>
                    </div>
                  </div>
                </div>

                <div
                  class="
                    col-lg-2 col-md-2
                    text-center
                    align-self-center
                    order-md-2 order-lg-2
                    px-md-1
                  "
                >
                  <div class="picsum-img-wrapper">
                    <img
                      [src]="
                        ap.MileageImageURL != undefined
                          ? _sharedService.baseUrl + ap.MileageImageURL
                          : _sharedService.default_img
                      "
                      class="gallery-img-queue imageSize"
                      (click)="
                      ap.MileageImageURL != undefined
                      ? open(imagePreview, ap.MileageImageURL, 'Mileage Image')
                      : ''
                        
                      "
                    />
                  </div>
                  <!-- <div *ngIf="ap.MileageImageURL == undefined">
                                        <img [src]="_sharedService.default_img" class="gallery-img"
                                            alt="Vehicle Images">
                                    </div> -->
                </div>

                <div
                  class="
                    col-lg-2 col-md-2
                    text-center
                    align-self-center
                    order-md-3 order-lg-3
                    px-md-1
                  "
                >
                  <div class="picsum-img-wrapper">
                    <img
                      [src]="
                        ap.LicensePlateBack != undefined
                          ? _sharedService.baseUrl + ap.LicensePlateBack
                          : _sharedService.default_img
                      "
                      class="gallery-img-queue imageSize"
                      (click)="
                      ap.LicensePlateBack != undefined
                      ? open(
                        imagePreview,
                        ap.LicensePlateBack,
                        'License Plate Back'
                      )
                      : ''

                        
                      "
                    />
                  </div>
                  <!-- <div *ngIf="ap.LicensePlateBack == undefined">
                                        <img [src]="_sharedService.default_img" class="gallery-img"
                                            alt="Vehicle Images">
                                    </div> -->
                </div>

                <div
                  class="
                    col-lg-2 col-md-2
                    text-center
                    align-self-center
                    order-md-4 order-lg-4
                    px-md-1
                  "
                >
                  <div class="picsum-img-wrapper">
                    <img
                      [src]="
                        ap.LicensePlateFront != undefined
                          ? _sharedService.baseUrl + ap.LicensePlateFront
                          : _sharedService.default_img
                      "
                      class="gallery-img-queue imageSize"
                      (click)="
                      ap.LicensePlateFront != undefined
                      ?  open(
                        imagePreview,
                        ap.LicensePlateFront,
                        'License Plate Front'
                      )
                      :''

                      
                      "
                    />
                  </div>
                  <!-- <div *ngIf="ap.LicensePlateFront == undefined">
                                        <img [src]="_sharedService.default_img" class="gallery-img"
                                            alt="Vehicle Images">
                                    </div> -->
                </div>

                <div
                  class="
                    col-lg-2 col-md-2
                    text-center
                    align-self-center
                    order-md-5 order-lg-5
                    px-md-1
                  "
                >
                  <div class="picsum-img-wrapper">
                    <img
                      [src]="
                        ap.VehicleFront != undefined
                          ? _sharedService.baseUrl + ap.VehicleFront
                          : _sharedService.default_img
                      "
                      class="
                      ap.VehicleFront != undefined
                      ?  open(imagePreview, ap.VehicleFront, 'Vehicle Front')
                      : _sharedService.default_img

                      gallery-img-queue imageSize"
                      (click)="
                      ap.VehicleFront != undefined
                      ?  open(imagePreview, ap.VehicleFront, 'Vehicle Front')
                      :''
                      "
                    />
                  </div>
                  <!-- <div *ngIf="ap.VehicleFront == undefined">
                                        <img [src]="_sharedService.default_img" class="gallery-img"
                                            alt="Vehicle Images">
                                    </div> -->
                </div>

                <div
                  class="
                    col-lg-2 col-md-2
                    text-center
                    align-self-center
                    order-md-6 order-lg-6
                    px-md-0
                  "
                  *ngIf="
                    _sharedService.logged_user_role_id == 1 ||
                    _sharedService.logged_user_role_id == 2 ||
                    _sharedService.logged_user_role_id == 3
                  "
                >
                  <div class="row mx-0 px-md-0 px-md-1">
                    <div class="col-lg-12 col-md-12 px-md-1">
                      <button
                        type="button"
                        title="Edit"
                        id="{{ i }}"
                        class="
                          btn btn-accept btn-round
                          py-2 py-md-1
                          editPadding
                          my-0
                        "
                        (click)="setAppointmentData(ap)"
                        [routerLink]="['/', 'queue', 'create-queue']"
                      >
                        Edit
                      </button>
                    </div>
                    <div class="col-lg-12 col-md-12 px-md-1">
                      <button
                        type="button"
                        title="Create Job"
                        id="{{ i }}"
                        class="
                          btn btn-accept btn-round
                          py-2 py-md-1
                          createPadding
                        "
                        (click)="setAppointmentData(ap)"
                        [routerLink]="['/', 'create-job', 'basic-info']"
                      >
                        Create Job
                      </button>
                    </div>

                    <div class="col-lg-12 col-md-12 px-md-1">
                      <button
                        type="button"
                        title="Delete"
                        id="{{ i }}"
                        class="
                          btn btn-reject btn-round
                          py-2 py-md-1
                          deletePadding
                          my-0
                        "
                        (click)="
                          openDeleteQueueModal(deleteQueue, ap.AppointmentID)
                        "
                      >
                        Delete
                        <i class="px-2 fas fa-trash pointer" title="delete"></i>
                      </button>
                    </div>
                  </div>
                </div>

                <!-- <div class="col-4 text-center align-self-center">
                                    <ngb-carousel class="results"
                                        *ngIf="ap.LicensePlateFront != undefined || ap.LicensePlateBack != undefined">
                                        <ng-template ngbSlide>
                                            <div class="picsum-img-wrapper">
                                                <img [src]="ap.LicensePlateBack != undefined ? _sharedService.baseUrl + ap.LicensePlateBack : _sharedService.default_img"
                                                    class="gallery-img-queue">
                                            </div>
                                        </ng-template>

                                        <ng-template ngbSlide>

                                            <div class="picsum-img-wrapper">
                                                <img [src]="ap.LicensePlateFront != undefined ? _sharedService.baseUrl + ap.LicensePlateFront : _sharedService.default_img"
                                                    class="gallery-img-queue">
                                            </div>
                                        </ng-template>
                                    </ngb-carousel>
                                    <div *ngIf="ap.LicensePlateFront == undefined || ap.LicensePlateBack == undefined">
                                        <img [src]="_sharedService.default_img" class="gallery-img"
                                            alt="Vehicle Images">
                                    </div>
                                </div> -->

                <!-- <div class="col-1 text-center align-self-center">
                                    <i class="px-2 fas fa-eye pointer" title="View"
                                        [routerLink]="['/','update-job','inspection-results'] "></i>

                                </div> -->

                <!-- <div class="col-4 align-self-center" *ngIf="jc.EngineTypeID != 29">
                                    <i class="ts e-capacity-icon mr-2 fa-lg" title="Engine Capacity"></i>
                                    <label>{{jc.EngineCapacity}} cc</label>
                                </div> -->
              </div>
            </div>
          </div>
        </div>
        <!-- <div class="row w-100 mx-0"
                    *ngIf="(jobCardArray.JCBasicInfoList | filter : tabID : 'JobTaskStatusID' | searchTechJobCards : searchQuery).length > 1 && (jobCardArray.JCBasicInfoList | filter : tabID : 'JobTaskStatusID' | searchTechJobCards : searchQuery).length != i">
                    <hr class="w-100">
                </div> -->
      </ng-container>
      <div
        class="row justify-content-center my-3 mb-md-5"
        *ngIf="
          _sharedService.jobObj != undefined &&
          _sharedService.jobObj.Appointments != undefined &&
          _sharedService.jobObj.Appointments.length >= 1
        "
      >
        <ngb-pagination
          *ngIf="_sharedService.jobObj.Appointment.AppointmentCount > 10"
          (pageChange)="getAllJobCards((filter.queuePageNumber = $event))"
          [collectionSize]="_sharedService.jobObj.Appointment.AppointmentCount"
          [(page)]="filter.queuePageNumber"
          aria-label="Default pagination"
          class="pagination-primary mb-md-4"
        >
        </ngb-pagination>
      </div>
    </div>
  </div>
</div>

<ng-template #warningDelete let-c="close" let-d="dismiss">
  <div class="adOptionModel" id="adOptionModel" role="document">
    <div class="modal-header">
      <h5 class="modal-title text-center">Delete Job</h5>
      <button type="button" class="close" (click)="closeModal()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <div class="fluid-container modal_container">
        <div class="row justify-content-between bottom_margins">
          <div class="col-lg-12 mt-4">
            <h5
              class="text-center col-12 heading-20 bold text-primary-0 m-b-10"
            >
              Are you sure you want to delete this job?
            </h5>
            <div class="col-6 float-left text-left">
              <button
                (click)="closeModal()"
                class="a-button btn btn-primary btn-round col-6"
              >
                No
              </button>
            </div>
            <div class="col-6 float-left text-right">
              <button
                (click)="deleteJobCard(JobCardID)"
                class="a-button btn btn-primary btn-round col-6"
              >
                Yes
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #taskModel let-c="close" let-d="dismiss">
  <div class="adOptionModel" id="adOptionModel" role="document">
    <div class="modal-header">
      <h5 class="modal-title text-center">Task Detail</h5>
      <button type="button" class="close" (click)="closeTaskModal()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <div class="fluid-container modal_container">
        <div class="row card mx-0 my-2">
          <div class="row">
            <div class="col-3 text-center align-self-center">
              <ngb-carousel
                class="results"
                *ngIf="
                  taskProfile.Gallery != undefined &&
                  taskProfile.Gallery.length > 0
                "
              >
                <ng-template
                  ngbSlide
                  *ngFor="
                    let image of taskProfile.Gallery
                      | filter: taskProfile.JobTask.JobTaskID:'ObjectID'
                      | filter: 50:'GalleryTypeID';
                    let idx = index
                  "
                >
                  <div class="picsum-img-wrapper">
                    <div *ngIf="image.IsVideo == false">
                      <img
                        [src]="
                          image
                            ? _sharedService.baseUrl + image.ImageURL
                            : _sharedService.default_img
                        "
                        class="result-img"
                      />
                    </div>
                    <div *ngIf="image.IsVideo == true">
                      <video
                        class="result-img"
                        controls
                        multiple
                        [src]="_sharedService.baseUrl + image.ImageURL"
                      >
                        Your browser does not support the video tag.
                      </video>
                    </div>
                  </div>
                </ng-template>
              </ngb-carousel>
              <div
                *ngIf="
                  taskProfile.Gallery == undefined ||
                  (
                    taskProfile.Gallery
                    | filter: taskProfile.JobTask.JobTaskID:'ObjectID'
                    | filter: 50:'GalleryTypeID'
                  ).length == 0
                "
              >
                <img [src]="_sharedService.default_img" alt="Results Images" />
              </div>
            </div>
            <div
              class="col-9 row"
              *ngIf="
                taskProfile != undefined && taskProfile.JobTask != undefined
              "
            >
              <!-- <div class="col-12 pt-2 text-right">
                            <i class="far fa-edit mr-2 collapse-tabset" title="Edit"
                                (click)=" openEditTask(taskProfile.JobTask); showMore = true;clickToggle()"></i>
                            <i class="far fa-trash-alt" title="Delete"
                                (click)="openDeleteTask(warningDelete,taskProfile.JobTask)"></i>
                        </div> -->
              <div class="col-6 px-0 pb-3">
                <div class="primary-font ml-3 smaller-font">
                  <span>Task</span>
                </div>
                <div class="ml-3">
                  <p class="part-detail-box custom-font my-0" title="">
                    <span
                      appElseHyphen
                      [elseHyphen]="taskProfile.JobTask.LaborDescriptionEng"
                    ></span>
                  </p>
                </div>
              </div>

              <div
                class="col-3 px-0 pb-3"
                *ngIf="_sharedService.logged_user_role_id != 8"
              >
                <div class="primary-font ml-3 smaller-font">
                  <span>Labor</span>
                </div>
                <div class="ml-3">
                  <p class="part-detail-box custom-font my-0" title="">
                    <span *ngIf="taskProfile.JobTask.NetAmount != undefined"
                      >{{
                        taskProfile.JobTask.NetAmount | number: "1.2-2"
                      }}
                      JOD</span
                    >
                    <span *ngIf="taskProfile.JobTask.NetAmount == undefined"
                      >-</span
                    >
                  </p>
                </div>
              </div>

              <div class="col-3 px-0 pb-3">
                <div class="primary-font ml-3 smaller-font">
                  <span>Priority</span>
                </div>
                <div class="ml-3">
                  <p class="part-detail-box custom-font my-0" title="">
                    {{
                      taskProfile.JobTask.PriorityTypeID == 83
                        ? "Medium"
                        : "High"
                    }}
                  </p>
                </div>
              </div>

              <div class="col-4 px-0 pb-3">
                <div class="primary-font ml-3 smaller-font">
                  <span>Type</span>
                </div>
                <div class="ml-3">
                  <p class="part-detail-box custom-font my-0" title="">
                    {{
                      taskProfile.JobTask.JobTaskTypeID == 51
                        ? "Internal"
                        : "External"
                    }}
                  </p>
                </div>
              </div>

              <div class="col-4 px-0 pb-3">
                <div class="primary-font ml-3 smaller-font">
                  <span>Category</span>
                </div>
                <div class="ml-3">
                  <p class="part-detail-box custom-font my-0" title="">
                    {{ taskProfile.JobTask.RepairTypeName }}
                  </p>
                </div>
              </div>

              <div class="col-4 px-0 pb-3">
                <div class="primary-font ml-3 smaller-font">
                  <span>Assigned To</span>
                </div>
                <div class="ml-3">
                  <p
                    class="part-detail-box custom-font my-0"
                    title=""
                    appElseHyphen
                    [elseHyphen]="taskProfile.JobTask.EmployeeFullName"
                  ></p>
                </div>
              </div>

              <div class="col-4 px-0 pb-3">
                <div class="primary-font ml-3 smaller-font">
                  <span>Start Time</span>
                </div>
                <div class="ml-3">
                  <p
                    class="part-detail-box custom-font my-0"
                    title=""
                    appElseHyphen
                    [elseHyphen]="
                      taskProfile.JobTask.AcceptedDateTime | date: 'short'
                    "
                  ></p>
                </div>
              </div>

              <div class="col-4 px-0 pb-3">
                <div class="primary-font ml-3 smaller-font">
                  <span>End Time</span>
                </div>
                <div class="ml-3">
                  <p
                    class="part-detail-box custom-font my-0"
                    title=""
                    appElseHyphen
                    [elseHyphen]="
                      taskProfile.JobTask.EndDateTime | date: 'short'
                    "
                  ></p>
                </div>
              </div>

              <div class="col-4 px-0 pb-3">
                <div class="primary-font ml-3 smaller-font">
                  <span>Concern</span>
                </div>
                <div class="ml-3">
                  <p class="part-detail-box custom-font my-0" title="">
                    <span
                      class="font-14"
                      appElseHyphen
                      [elseHyphen]="taskProfile.JobTask.ConcernDescription"
                    ></span>
                  </p>
                </div>
              </div>

              <div class="col-6 px-0 pb-3">
                <div class="primary-font ml-3 smaller-font">
                  <span>QA Comments</span>
                </div>
                <div class="ml-3">
                  <p class="part-detail-box custom-font my-0" title="">
                    <span
                      class="font-14"
                      appElseHyphen
                      [elseHyphen]="taskProfile.JobTask.QAComments"
                    ></span>
                  </p>
                </div>
              </div>

              <div class="col-6 px-0 pb-3">
                <div class="primary-font ml-3 smaller-font">
                  <span>Description</span>
                </div>
                <div class="ml-3">
                  <p class="part-detail-box custom-font my-0" title="">
                    <span
                      class="font-14"
                      appElseHyphen
                      [elseHyphen]="taskProfile.JobTask.TaskDescription"
                    ></span>
                  </p>
                </div>
              </div>

              <div
                class="col-6 px-0 pb-3"
                *ngIf="taskProfile.JobTask.JobTaskTypeID == 52"
              >
                <div class="primary-font ml-3 smaller-font">
                  <span>Address</span>
                </div>
                <div class="ml-3">
                  <p class="part-detail-box custom-font my-0" title="">
                    <span
                      class="font-14"
                      appElseHyphen
                      [elseHyphen]="taskProfile.JobTask.Location"
                    ></span>
                  </p>
                </div>
              </div>
            </div>

            <div class="col-12 py-3">
              <table class="table mx-3 text-left primary-font page-animation">
                <thead>
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">Part</th>
                    <th scope="col">Quantity</th>
                    <th scope="col">Note</th>
                    <!-- <th scope="col">Action</th> -->
                  </tr>
                </thead>
                <tbody>
                  <!-- id 49 for External Task task0 -->
                  <tr *ngFor="let jp of taskProfile.JobParts; let i = index">
                    <td>{{ i + 1 }}</td>
                    <td>{{ jp.PartNameEnglish }}</td>
                    <td>{{ jp.Quantity }}</td>
                    <td>{{ jp.Notes }}</td>
                    <!-- <td><i class="far fa-edit mr-2 collapse-tabset" title="Edit"
                                                (click)="onEditPart(jp); showMore = true;clickToggle()"></i>
                                            <i class="far fa-trash-alt" title="Delete"
                                                (click)="openDeletePart(deletePart,jp)"></i>
                                        </td> -->
                  </tr>
                </tbody>
                <tbody
                  *ngIf="
                    taskProfile.JobParts == undefined ||
                    (taskProfile.JobParts != undefined &&
                      taskProfile.JobParts.length == 0)
                  "
                >
                  <tr scope="row">
                    <td colspan="12" class="text-center">No part added!</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #assignProcessModal let-c="close" let-d="dismiss">
  <div class="adOptionModel" id="adOptionModel" role="document">
    <div class="modal-header">
      <h5 class="modal-title text-center">
        {{ currentProcess.TypeNameEnglish }}
      </h5>
      <button type="button" class="close" (click)="closeModal()" title="Cancel">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <div class="fluid-container modal_container">
        <div class="row justify-content-between bottom_margins">
          <div class="col-lg-12">
            <div class="floating-label form-group col-12">
              <ng-select
                class="custom"
                [clearable]="false"
                (change)="changeAssignment = true"
                name="{{ currentProcess?.TypeNameEnglish }}"
                placeholder="Assign {{ currentProcess?.TypeNameEnglish }}"
                id="{{ currentProcess?.TypeNameEnglish }}1"
                [(ngModel)]="currentProcess.EmployeeID"
              >
                <ng-container
                  *ngFor="
                    let emp of _sharedService.jobObj.Employees
                      | employeeFilter
                        : currentProcess.ProcessTypeID
                        : 'RoleID'
                        : _sharedService.jobObj.UserRoles
                  "
                >
                  <ng-option [value]="emp.UserID">
                    {{ emp.EmployeeFullName }}
                  </ng-option>
                </ng-container>
              </ng-select>
            </div>

            <div class="col-6 float-left text-left">
              <button
                (click)="closeAssignModal(); changeAssignment = false"
                class="a-button btn btn-primary btn-round btn-simple col-6"
              >
                Cancel
              </button>
            </div>
            <div class="col-6 float-left text-right">
              <button
                (click)="assignJP(currentProcess)"
                class="a-button btn btn-primary btn-round btn-simple col-6"
              >
                Yes
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #assignTechModal let-c="close" let-d="dismiss">
  <div class="adOptionModel" id="adOptionModel" role="document">
    <div class="modal-header">
      <h5 class="modal-title text-center">
        <span *ngIf="TechTypeID != 1 && TechTypeID != 2">
          Select
          {{
            TechTypeID == 96
              ? "Mechanical"
              : TechTypeID == 95
              ? "Electrical"
              : TechTypeID == 139
              ? "Inspection"
              : "Other"
          }}
          Technician</span
        >
        <span *ngIf="TechTypeID == 1">Assign Foreman</span>
        <span *ngIf="TechTypeID == 2">Assign Supervisor</span>
      </h5>
      <button
        type="button"
        class="close"
        (click)="closeAssignTechModal()"
        title="Cancel"
      >
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <div class="fluid-container modal_container">
        <div class="row justify-content-between bottom_margins">
          <div class="col-lg-12">
            <div
              class="floating-label form-group col-12"
              *ngIf="TechTypeID == 96"
            >
              <ng-select
                placeholder="Mechanic"
                class="custom"
                name="Mechanic"
                [clearable]="false"
                (change)="changeAssignment = true"
                [(ngModel)]="JobCard.MechanicID"
              >
                <ng-option
                  *ngFor="
                    let item of _sharedService.jobObj.UserRoles
                      | filter: '8':'RoleID'
                  "
                  [value]="item.UserID"
                  >{{ item.EmployeeFullName }}
                </ng-option>
              </ng-select>
            </div>

            <div
              class="floating-label form-group col-12"
              *ngIf="TechTypeID == 95"
            >
              <ng-select
                placeholder="Electrician"
                class="custom"
                name="Electrician"
                [clearable]="false"
                (change)="changeAssignment = true"
                [(ngModel)]="JobCard.ElectricianID"
              >
                <ng-option
                  *ngFor="
                    let item of _sharedService.jobObj.UserRoles
                      | filter: '8':'RoleID'
                  "
                  [value]="item.UserID"
                  >{{ item.EmployeeFullName }}
                </ng-option>
              </ng-select>
            </div>

            <div
              class="floating-label form-group col-12"
              *ngIf="TechTypeID == 97"
            >
              <ng-select
                placeholder="Other"
                class="custom"
                name="Other"
                [clearable]="false"
                (change)="changeAssignment = true"
                [(ngModel)]="JobCard.OtherTechID"
              >
                <ng-option
                  *ngFor="
                    let item of _sharedService.jobObj.UserRoles
                      | filter: '8':'RoleID'
                  "
                  [value]="item.UserID"
                  >{{ item.EmployeeFullName }}
                </ng-option>
              </ng-select>
            </div>

            <div
              class="floating-label form-group col-12"
              *ngIf="TechTypeID == 139"
            >
              <ng-select
                placeholder="Inspection"
                class="custom"
                name="Other"
                [clearable]="false"
                (change)="changeAssignment = true"
                [(ngModel)]="JobCard.InspectionID"
              >
                <ng-option
                  *ngFor="
                    let item of _sharedService.jobObj.UserRoles
                      | filter: '8':'RoleID'
                  "
                  [value]="item.UserID"
                  >{{ item.EmployeeFullName }}
                </ng-option>
              </ng-select>
            </div>

            <div
              class="floating-label form-group col-12"
              *ngIf="TechTypeID == 1"
            >
              <ng-select
                placeholder="Foreman"
                class="custom"
                name="Foreman"
                (change)="JobCard.IsModified = true"
                [(ngModel)]="JobCard.PreferredForemanID"
              >
                <ng-option
                  *ngFor="
                    let item of _sharedService.jobObj.UserRoles
                      | filter: '5':'RoleID'
                  "
                  [value]="item.UserID"
                  >{{ item.EmployeeFullName }}
                </ng-option>
              </ng-select>
            </div>

            <div
              class="floating-label form-group col-12"
              *ngIf="TechTypeID == 2"
            >
              <ng-select
                placeholder="Supervisor"
                class="custom"
                name="Supervisor"
                (change)="JobCard.IsModified = true"
                [(ngModel)]="JobCard.SupervisorID"
              >
                <ng-option
                  *ngFor="
                    let item of _sharedService.jobObj.UserRoles
                      | filter: '4':'RoleID'
                  "
                  [value]="item.UserID"
                  >{{ item.EmployeeFullName }}
                </ng-option>
              </ng-select>
            </div>

            <div class="col-6 float-left text-left">
              <button
                (click)="closeAssignTechModal(); changeAssignment = false"
                class="a-button btn btn-primary btn-round btn-simple col-6"
              >
                Cancel
              </button>
            </div>
            <div class="col-6 float-left text-right">
              <button
                (click)="
                  TechTypeID == 1 || TechTypeID == 2
                    ? assignSupForeman()
                    : assignTasks()
                "
                class="a-button btn btn-primary btn-round btn-simple col-6"
              >
                Yes
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>

<ng-template #imagePreview let-d="dismiss('Cross click')">
  <div class="modal-header">
    <h5 class="modal-title text-center">{{ heading }}</h5>
    <button type="button" class="close" (click)="(d)">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body text-center">
    <img
      class="img-fluid"
      [src]="
        imageURL
          ? _sharedService.baseUrl + imageURL
          : _sharedService.default_img
      "
    />
  </div>
</ng-template>

<ng-template #deleteQueue let-c="close" let-d="dismiss">
  <div class="adOptionModel" id="adOptionModel" role="document">
    <div class="modal-header">
      <h5 class="modal-title text-center">Delete Queue</h5>
      <button type="button" class="close" (click)="closeDeleteQueueModal()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <div class="fluid-container modal_container">
        <div class="row justify-content-between bottom_margins">
          <div class="col-lg-12 mt-4">
            <h5
              class="text-center col-12 heading-20 bold text-primary-0 m-b-10"
            >
              Are you sure you want to delete this Card?
            </h5>
            <div class="col-6 float-left text-left">
              <button
                (click)="closeDeleteQueueModal()"
                class="a-button btn btn-primary btn-round col-6"
              >
                No
              </button>
            </div>
            <div class="col-6 float-left text-right">
              <button
                (click)="
                  deleteAppointment(appointmentID); closeDeleteQueueModal()
                "
                class="a-button btn btn-primary btn-round col-6"
              >
                Yes
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-template>
